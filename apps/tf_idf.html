<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZT6JM33V5J"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-ZT6JM33V5J');
        </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive TF-IDF Explainer</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Custom theme configuration */
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a78bfa;
        }
        
        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Custom button styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #a78bfa, #c4b5fd);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #374151;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-1px);
        }
        
        /* Textarea focus styles */
        .custom-textarea:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.15);
        }
        
        /* TF-IDF Matrix heatmap styles */
        .tfidf-cell {
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .tfidf-cell:hover {
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.3);
        }
        
        .tfidf-cell.highlighted {
            border: 2px solid #8b5cf6;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }
        
        /* Tooltip styles */
        .tooltip {
            position: absolute;
            background: #1f2937;
            color: #f3f4f6;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            border: 1px solid #374151;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            max-width: 300px;
            white-space: nowrap;
        }
        
        .tooltip.show {
            opacity: 1;
        }
        
        /* Term highlighting */
        .term-highlighted {
            background: rgba(139, 92, 246, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
            border: 1px solid #8b5cf6;
        }
        
        /* IDF word styles */
        .idf-word {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .idf-word:hover {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }
        
        .idf-word.selected {
            background: #8b5cf6;
            color: #f3f4f6;
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid #374151;
            border-top: 3px solid #8b5cf6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Table styling */
        .tf-table, .tfidf-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .tf-table th, .tf-table td,
        .tfidf-table th, .tfidf-table td {
            padding: 8px 12px;
            text-align: left;
            border: 1px solid #374151;
        }
        
        .tf-table th, .tfidf-table th {
            background: #374151;
            font-weight: 600;
            color: #f3f4f6;
        }
        
        .tf-table td, .tfidf-table td {
            background: #1f2937;
            color: #f3f4f6;
        }
        
        /* Responsive table scroll */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #374151;
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] flex flex-col min-h-screen">
    <!-- Tooltip element -->
    <div id="tooltip" class="tooltip"></div>
    
    <!-- Header -->
    <header class="py-6 px-4 text-center border-b border-[#374151]">
        <h1 class="text-3xl md:text-4xl font-bold text-[#f3f4f6]">
            Interactive TF-IDF Explainer
        </h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col lg:flex-row gap-6 p-6">
        <!-- Left Panel: Control & Input -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col">
                <!-- Input Section -->
                <div class="mb-6">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-file-text text-[#8b5cf6] mr-2"></i>
                        1. Corpus Input
                    </h2>
                    <label for="corpusInput" class="text-sm font-medium text-[#9ca3af] mb-2 block">
                        Enter documents (one per line):
                    </label>
                    <textarea 
                        id="corpusInput" 
                        class="custom-textarea w-full bg-[#101827] border border-[#374151] rounded-lg p-4 text-[#f3f4f6] text-sm resize-none transition-all duration-300"
                        placeholder="Enter your documents here, one per line..."
                        rows="8"
                    >The cat sat on the mat and looked around
The dog ran quickly through the park
Machine learning algorithms can process text data
Natural language processing helps computers understand text
The cat and dog are both pets</textarea>
                </div>

                <!-- TF-IDF Explanation -->
                <div class="mb-6 flex-grow">
                    <h3 class="text-lg font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-info-circle text-[#8b5cf6] mr-2"></i>
                        What is TF-IDF?
                    </h3>
                    <div class="text-[#9ca3af] text-sm leading-relaxed space-y-2">
                        <p>
                            <strong class="text-[#f3f4f6]">TF-IDF</strong> (Term Frequency-Inverse Document Frequency) 
                            is a numerical statistic that reflects how important a word is to a document within a collection of documents.
                        </p>
                        <p>
                            <strong class="text-[#a78bfa]">TF (Term Frequency):</strong> How often a term appears in a document.
                        </p>
                        <p>
                            <strong class="text-[#a78bfa]">IDF (Inverse Document Frequency):</strong> How rare or common a term is across all documents.
                        </p>
                        <p>
                            <strong class="text-[#a78bfa]">TF-IDF Score:</strong> TF × IDF - Higher scores indicate terms that are frequent in a document but rare across the corpus.
                        </p>
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="flex gap-3">
                    <button 
                        id="calculateBtn" 
                        class="btn-primary flex-1 py-3 px-4 rounded-lg font-medium text-white flex items-center justify-center"
                    >
                        <i class="fas fa-calculator mr-2"></i>
                        Calculate TF-IDF
                    </button>
                    <button 
                        id="loadSampleBtn" 
                        class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center"
                    >
                        <i class="fas fa-file-import mr-2"></i>
                        Load Sample
                    </button>
                    <button 
                        id="resetBtn" 
                        class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center"
                    >
                        <i class="fas fa-undo mr-2"></i>
                        Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Panel: Visualization & Output -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col space-y-6 overflow-y-auto">
                <!-- Term Frequency Section -->
                <div class="fade-in" id="tfSection" style="display: none;">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-hashtag text-[#8b5cf6] mr-2"></i>
                        2. Term Frequency (TF)
                    </h2>
                    <div class="bg-[#101827] border border-[#374151] rounded-lg p-4">
                        <div id="tfDisplay" class="overflow-x-auto">
                            <p class="text-[#9ca3af] text-sm italic">Click "Calculate TF-IDF" to see term frequencies...</p>
                        </div>
                    </div>
                </div>

                <!-- Inverse Document Frequency Section -->
                <div class="fade-in" id="idfSection" style="display: none;">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-chart-line text-[#8b5cf6] mr-2"></i>
                        3. Inverse Document Frequency (IDF)
                    </h2>
                    <div class="bg-[#101827] border border-[#374151] rounded-lg p-4">
                        <p class="text-[#9ca3af] text-xs mb-3">Click on any term to highlight it across all visualizations</p>
                        <div id="idfDisplay" class="grid grid-cols-2 md:grid-cols-3 gap-2">
                            <p class="text-[#9ca3af] text-sm italic col-span-full">Process corpus to see IDF scores...</p>
                        </div>
                    </div>
                </div>

                <!-- Final TF-IDF Scores Section -->
                <div class="fade-in flex-grow" id="tfidfSection" style="display: none;">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-table text-[#8b5cf6] mr-2"></i>
                        4. Final TF-IDF Scores
                    </h2>
                    <div class="bg-[#101827] border border-[#374151] rounded-lg p-4 flex-grow">
                        <p class="text-[#9ca3af] text-xs mb-3">Hover over cells to see calculation details. Darker colors indicate higher TF-IDF scores.</p>
                        <div id="tfidfDisplay" class="table-container">
                            <p class="text-[#9ca3af] text-sm italic">Complete calculation to see TF-IDF matrix...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] py-6 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.036 3L4.5 7.73v8.54l7.536 4.73 7.536-4.73V7.73L12.036 3zm5.157 3.74L12 10.5 6.807 6.74 12 4.73l5.193 2.01zm-5.157 12.72l-5.036-3.16V9.04L12 13.08l5.036-4.04v7.26L12.036 19.46z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Global variables
        let documents = [];
        let vocabulary = [];
        let tfScores = [];
        let idfScores = {};
        let tfidfMatrix = [];
        let selectedTerm = null;

        // DOM elements
        const corpusInput = document.getElementById('corpusInput');
        const calculateBtn = document.getElementById('calculateBtn');
        const loadSampleBtn = document.getElementById('loadSampleBtn');
        const resetBtn = document.getElementById('resetBtn');
        const tfSection = document.getElementById('tfSection');
        const idfSection = document.getElementById('idfSection');
        const tfidfSection = document.getElementById('tfidfSection');
        const tfDisplay = document.getElementById('tfDisplay');
        const idfDisplay = document.getElementById('idfDisplay');
        const tfidfDisplay = document.getElementById('tfidfDisplay');
        const tooltip = document.getElementById('tooltip');

        // Sample datasets
        const sampleDatasets = [
            [
                "The cat sat on the mat and looked around",
                "The dog ran quickly through the park", 
                "Machine learning algorithms can process text data",
                "Natural language processing helps computers understand text",
                "The cat and dog are both pets"
            ],
            [
                "Python is a popular programming language",
                "JavaScript is used for web development",
                "Machine learning uses Python extensively",
                "Web development requires JavaScript knowledge",
                "Programming languages have different strengths"
            ],
            [
                "Data science involves analyzing large datasets",
                "Machine learning models require training data",
                "Statistical analysis helps understand patterns",
                "Data visualization makes insights clearer",
                "Big data analytics drives business decisions"
            ]
        ];

        // Text preprocessing
        function preprocessText(text) {
            return text.toLowerCase()
                      .replace(/[^\w\s]/g, '')
                      .split(/\s+/)
                      .filter(word => word.length > 0);
        }

        // Calculate Term Frequency
        function calculateTF(document, vocabulary) {
            const words = preprocessText(document);
            const tf = {};
            vocabulary.forEach(term => tf[term] = 0);
            
            words.forEach(word => {
                if (tf.hasOwnProperty(word)) {
                    tf[word]++;
                }
            });
            
            // Normalize by document length
            const docLength = words.length;
            Object.keys(tf).forEach(term => {
                tf[term] = docLength > 0 ? tf[term] / docLength : 0;
            });
            
            return tf;
        }

        // Calculate Inverse Document Frequency
        function calculateIDF(vocabulary, documents) {
            const idf = {};
            const totalDocs = documents.length;
            
            vocabulary.forEach(term => {
                let docsContaining = 0;
                documents.forEach(doc => {
                    const words = preprocessText(doc);
                    if (words.includes(term)) {
                        docsContaining++;
                    }
                });
                idf[term] = Math.log(totalDocs / Math.max(1, docsContaining));
            });
            
            return idf;
        }

        // Build vocabulary
        function buildVocabulary(documents) {
            const vocabSet = new Set();
            documents.forEach(doc => {
                const words = preprocessText(doc);
                words.forEach(word => vocabSet.add(word));
            });
            return Array.from(vocabSet).sort();
        }

        // Calculate TF-IDF
        function calculateTFIDF(tfScores, idfScores) {
            return tfScores.map(tf => {
                const tfidf = {};
                Object.keys(tf).forEach(term => {
                    tfidf[term] = tf[term] * idfScores[term];
                });
                return tfidf;
            });
        }

        // Display Term Frequency
        function displayTF(tfScores, vocabulary, documents) {
            let html = '<table class="tf-table"><thead><tr><th>Document</th>';
            vocabulary.slice(0, 10).forEach(term => {
                html += `<th>${term}</th>`;
            });
            if (vocabulary.length > 10) {
                html += '<th>...</th>';
            }
            html += '</tr></thead><tbody>';
            
            tfScores.forEach((tf, docIndex) => {
                html += `<tr><td><strong>Doc ${docIndex + 1}</strong><br><span class="text-xs text-[#9ca3af]">"${documents[docIndex].substring(0, 50)}${documents[docIndex].length > 50 ? '...' : ''}"</span></td>`;
                vocabulary.slice(0, 10).forEach(term => {
                    const score = tf[term].toFixed(3);
                    html += `<td class="font-mono">${score}</td>`;
                });
                if (vocabulary.length > 10) {
                    html += '<td>...</td>';
                }
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            if (vocabulary.length > 10) {
                html += '<p class="text-xs text-[#9ca3af] mt-2">* Showing first 10 terms. Full matrix available in TF-IDF section.</p>';
            }
            tfDisplay.innerHTML = html;
        }

        // Display IDF scores
        function displayIDF(idfScores) {
            let html = '';
            Object.entries(idfScores)
                  .sort(([,a], [,b]) => b - a)
                  .forEach(([term, score]) => {
                      html += `<div class="idf-word bg-[#374151] p-2 rounded text-sm" 
                                   data-term="${term}" 
                                   data-idf="${score.toFixed(3)}">
                                   <strong>${term}</strong><br>
                                   <span class="text-xs text-[#9ca3af]">IDF: ${score.toFixed(3)}</span>
                               </div>`;
                  });
            idfDisplay.innerHTML = html;
            
            // Add click listeners for term highlighting
            document.querySelectorAll('.idf-word').forEach(element => {
                element.addEventListener('click', function() {
                    const term = this.dataset.term;
                    highlightTerm(term);
                });
                
                element.addEventListener('mouseenter', function(e) {
                    const term = this.dataset.term;
                    const idf = parseFloat(this.dataset.idf);
                    const docsContaining = documents.filter(doc => 
                        preprocessText(doc).includes(term)
                    ).length;
                    
                    showTooltip(e, `Formula: log(${documents.length} / ${docsContaining}) = ${idf.toFixed(3)}`);
                });
                
                element.addEventListener('mouseleave', hideTooltip);
            });
        }

        // Display TF-IDF Matrix
        function displayTFIDF(tfidfMatrix, vocabulary, documents) {
            // Find max value for color scaling
            let maxScore = 0;
            tfidfMatrix.forEach(tfidf => {
                Object.values(tfidf).forEach(score => {
                    maxScore = Math.max(maxScore, score);
                });
            });
            
            let html = '<table class="tfidf-table"><thead><tr><th>Document</th>';
            vocabulary.forEach(term => {
                html += `<th class="text-xs">${term}</th>`;
            });
            html += '</tr></thead><tbody>';
            
            tfidfMatrix.forEach((tfidf, docIndex) => {
                html += `<tr><td class="font-semibold">Doc ${docIndex + 1}</td>`;
                vocabulary.forEach(term => {
                    const score = tfidf[term];
                    const intensity = maxScore > 0 ? score / maxScore : 0;
                    const bgOpacity = Math.max(0.1, intensity);
                    const bgColor = `rgba(139, 92, 246, ${bgOpacity})`;
                    
                    html += `<td class="tfidf-cell font-mono text-xs" 
                                style="background-color: ${bgColor}" 
                                data-term="${term}" 
                                data-doc="${docIndex}"
                                data-tf="${tfScores[docIndex][term].toFixed(3)}"
                                data-idf="${idfScores[term].toFixed(3)}"
                                data-tfidf="${score.toFixed(3)}">
                                ${score.toFixed(3)}
                            </td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            tfidfDisplay.innerHTML = html;
            
            // Add hover listeners for tooltips
            document.querySelectorAll('.tfidf-cell').forEach(cell => {
                cell.addEventListener('mouseenter', function(e) {
                    const term = this.dataset.term;
                    const tf = this.dataset.tf;
                    const idf = this.dataset.idf;
                    const tfidf = this.dataset.tfidf;
                    
                    showTooltip(e, `Term: "${term}"<br>TF: ${tf}<br>IDF: ${idf}<br>TF-IDF: ${tf} × ${idf} = ${tfidf}`);
                });
                
                cell.addEventListener('mouseleave', hideTooltip);
                
                cell.addEventListener('click', function() {
                    const term = this.dataset.term;
                    highlightTerm(term);
                });
            });
        }

        // Show tooltip
        function showTooltip(event, text) {
            tooltip.innerHTML = text;
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 10 + 'px';
            tooltip.classList.add('show');
        }

        // Hide tooltip
        function hideTooltip() {
            tooltip.classList.remove('show');
        }

        // Highlight term across all visualizations
        function highlightTerm(term) {
            // Clear previous selections
            document.querySelectorAll('.selected, .highlighted, .term-highlighted').forEach(el => {
                el.classList.remove('selected', 'highlighted', 'term-highlighted');
            });
            
            if (selectedTerm === term) {
                selectedTerm = null;
                return;
            }
            
            selectedTerm = term;
            
            // Highlight in IDF section
            document.querySelectorAll(`[data-term="${term}"]`).forEach(el => {
                if (el.classList.contains('idf-word')) {
                    el.classList.add('selected');
                } else if (el.classList.contains('tfidf-cell')) {
                    el.classList.add('highlighted');
                }
            });
            
            // Highlight in input text
            const inputText = corpusInput.value;
            const regex = new RegExp(`\\b${term}\\b`, 'gi');
            // Note: This is a simplified highlighting approach
            // In a production app, you'd want more sophisticated text highlighting
        }

        // Main calculation function
        function performCalculation() {
            const inputText = corpusInput.value.trim();
            
            if (!inputText) {
                alert('Please enter some documents to analyze.');
                return;
            }
            
            // Show loading state
            calculateBtn.innerHTML = '<div class="spinner mr-2"></div>Calculating...';
            calculateBtn.disabled = true;
            
            setTimeout(() => {
                try {
                    // Parse documents
                    documents = inputText.split('\n')
                                       .map(line => line.trim())
                                       .filter(line => line.length > 0);
                    
                    if (documents.length === 0) {
                        throw new Error('No valid documents found.');
                    }
                    
                    // Build vocabulary and calculate scores
                    vocabulary = buildVocabulary(documents);
                    tfScores = documents.map(doc => calculateTF(doc, vocabulary));
                    idfScores = calculateIDF(vocabulary, documents);
                    tfidfMatrix = calculateTFIDF(tfScores, idfScores);
                    
                    // Display results with staggered animations
                    setTimeout(() => {
                        tfSection.style.display = 'block';
                        displayTF(tfScores, vocabulary, documents);
                    }, 200);
                    
                    setTimeout(() => {
                        idfSection.style.display = 'block';
                        displayIDF(idfScores);
                    }, 600);
                    
                    setTimeout(() => {
                        tfidfSection.style.display = 'block';
                        displayTFIDF(tfidfMatrix, vocabulary, documents);
                    }, 1000);
                    
                } catch (error) {
                    console.error('Calculation error:', error);
                    alert('Error during calculation: ' + error.message);
                } finally {
                    calculateBtn.innerHTML = '<i class="fas fa-calculator mr-2"></i>Calculate TF-IDF';
                    calculateBtn.disabled = false;
                }
            }, 1000);
        }

        // Load sample data
        function loadSample() {
            const randomSample = sampleDatasets[Math.floor(Math.random() * sampleDatasets.length)];
            corpusInput.value = randomSample.join('\n');
            corpusInput.focus();
        }

        // Reset application
        function resetApp() {
            corpusInput.value = sampleDatasets[0].join('\n');
            documents = [];
            vocabulary = [];
            tfScores = [];
            idfScores = {};
            tfidfMatrix = [];
            selectedTerm = null;
            
            tfSection.style.display = 'none';
            idfSection.style.display = 'none';
            tfidfSection.style.display = 'none';
            
            tfDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">Click "Calculate TF-IDF" to see term frequencies...</p>';
            idfDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic col-span-full">Process corpus to see IDF scores...</p>';
            tfidfDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">Complete calculation to see TF-IDF matrix...</p>';
        }

        // Event listeners
        calculateBtn.addEventListener('click', performCalculation);
        loadSampleBtn.addEventListener('click', loadSample);
        resetBtn.addEventListener('click', resetApp);

        // Auto-resize textarea
        corpusInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 300) + 'px';
        });

        // Keyboard shortcuts
        corpusInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {
                event.preventDefault();
                performCalculation();
            }
        });

        // Initialize with sample calculation
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(performCalculation, 1000);
        });
    </script>
</body>
</html>
