<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZT6JM33V5J"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-ZT6JM33V5J');
        </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regression Error Metrics Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #101827;
            --panel-bg: #1f2937;
            --primary-accent: #8b5cf6;
            --lighter-accent-hover: #a78bfa;
            --primary-text: #f3f4f6;
            --secondary-text: #9ca3af;
            --border-color: #374151;
            --warning-color: #facc15;
        }
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: var(--bg-color);
            color: var(--primary-text);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 3px;
        }
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
            width: 100%;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: var(--border-color);
            border-radius: 3px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: var(--primary-accent);
            cursor: pointer;
            margin-top: -7px;
            transition: background-color 0.2s;
        }
        input[type=range]:hover::-webkit-slider-thumb {
            background: var(--lighter-accent-hover);
        }
        .metric-bar-bg {
            background-color: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            height: 8px;
        }
        .metric-bar {
            background-color: var(--primary-accent);
            height: 100%;
            transition: width 0.2s ease-out;
        }
        .footer-icon {
            transition: color 0.2s ease-in-out;
        }
        .data-point {
            cursor: grab;
            transition: r 0.2s, fill 0.2s;
        }
        .data-point.dragging {
            cursor: grabbing;
            fill: var(--lighter-accent-hover);
            r: 8;
        }
        .error-line {
            transition: stroke 0.2s, stroke-width 0.2s;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-[#101827] text-[#f3f4f6]">

    <!-- Header -->
    <header class="w-full p-4 bg-[#1f2937] border-b border-[#374151] text-center flex-shrink-0">
        <h1 class="text-2xl font-bold">Regression Error Metrics Explorer</h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-screen-2xl mx-auto p-4 lg:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- Left Panel: Visualization -->
        <div class="lg:col-span-8 bg-[#1f2937] border border-[#374151] rounded-lg p-4 flex items-center justify-center">
            <svg id="plot-canvas" class="w-full h-full"></svg>
        </div>

        <!-- Right Panel: Controls & Metrics -->
        <div class="lg:col-span-4 bg-[#1f2937] border border-[#374151] rounded-lg p-4 flex flex-col gap-6">
            <!-- Controls -->
            <div class="flex flex-col gap-4">
                <div>
                    <label for="points-slider" class="block text-sm font-semibold mb-2 text-[#9ca3af]">Number of Points: <span id="points-value" class="text-[#8b5cf6]">50</span></label>
                    <input type="range" id="points-slider" min="10" max="200" step="5" value="50">
                </div>
                <div>
                    <label for="noise-slider" class="block text-sm font-semibold mb-2 text-[#9ca3af]">Noise: <span id="noise-value" class="text-[#8b5cf6]">0.10</span></label>
                    <input type="range" id="noise-slider" min="0" max="1" step="0.05" value="0.1">
                </div>
                <div class="flex gap-3">
                    <button id="randomize-btn" class="w-full py-2 px-4 bg-[#374151] hover:bg-[#4b5563] text-white font-bold rounded-md transition-colors">Randomize</button>
                    <button id="reset-btn" class="w-full py-2 px-4 bg-[#374151] hover:bg-[#4b5563] text-white font-bold rounded-md transition-colors">Reset</button>
                </div>
            </div>

            <div class="border-t border-[#374151]"></div>

            <!-- Metrics -->
            <div class="flex flex-col gap-4">
                <h2 class="text-lg font-bold text-center">Error Metrics</h2>
                <!-- MAE -->
                <div class="metric-container">
                    <div class="flex justify-between items-baseline mb-1">
                        <h3 class="text-md font-semibold text-[#9ca3af]">MAE</h3>
                        <p id="mae-value" class="text-xl font-bold text-[#f3f4f6]">0.00</p>
                    </div>
                    <div class="metric-bar-bg"><div id="mae-bar" class="metric-bar"></div></div>
                </div>
                <!-- MSE -->
                <div class="metric-container">
                    <div class="flex justify-between items-baseline mb-1">
                        <h3 class="text-md font-semibold text-[#9ca3af]">MSE</h3>
                        <p id="mse-value" class="text-xl font-bold text-[#f3f4f6]">0.00</p>
                    </div>
                    <div class="metric-bar-bg"><div id="mse-bar" class="metric-bar"></div></div>
                </div>
                <!-- RMSE -->
                <div class="metric-container">
                    <div class="flex justify-between items-baseline mb-1">
                        <h3 class="text-md font-semibold text-[#9ca3af]">RMSE</h3>
                        <p id="rmse-value" class="text-xl font-bold text-[#f3f4f6]">0.00</p>
                    </div>
                    <div class="metric-bar-bg"><div id="rmse-bar" class="metric-bar"></div></div>
                </div>
            </div>
            
            <div class="border-t border-[#374151]"></div>

            <!-- Explanation -->
            <div class="flex-grow flex flex-col">
                 <h2 class="text-lg font-bold text-center mb-2">Explanation</h2>
                 <div id="explanation-panel" class="text-sm text-[#9ca3af] space-y-3 p-2 rounded-md bg-[#101827] flex-grow custom-scrollbar overflow-y-auto">
                    <!-- Dynamic content here -->
                 </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full p-6 bg-[#1f2937] border-t border-[#374151] flex-shrink-0">
        <div class="container mx-auto text-center text-[#9ca3af]">
            <div class="flex justify-center items-center space-x-6 mb-4">
                <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" rel="noopener noreferrer" class="footer-icon text-[#9ca3af] hover:text-[#a78bfa]"><i class="fab fa-linkedin fa-2x"></i></a>
                <a href="https://github.com/AshishJangra27" target="_blank" rel="noopener noreferrer" class="footer-icon text-[#9ca3af] hover:text-[#a78bfa]"><i class="fab fa-github fa-2x"></i></a>
                <a href="https://www.kaggle.com/ashishjangra27" target="_blank" rel="noopener noreferrer" class="footer-icon text-[#9ca3af] hover:text-[#a78bfa]"><i class="fab fa-kaggle fa-2x"></i></a>
                <a href="https://huggingface.co/ashish-jangra" target="_blank" rel="noopener noreferrer" class="footer-icon text-[#9ca3af] hover:text-[#a78bfa]">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="inline-block">
                        <path d="M20.24,12.2a8.24,8.24,0,1,1-16.48,0a8.24,8.24,0,0,1,16.48,0Z"></path>
                        <path d="M15.42,16.2c.18-.42.24-.84.18-1.26a4.55,4.55,0,0,0-.54-1.5,4.55,4.55,0,0,0-1.5-.54c-.42-.06-.84.06-1.26.18a4.55,4.55,0,0,0-1.5.54,4.55,4.55,0,0,0-.54,1.5c-.06.42.06.84.18,1.26a4.55,4.55,0,0,0,.54,1.5,4.55,4.55,0,0,0,1.5.54c.42.06.84,0,1.26-.18a4.55,4.55,0,0,0,1.5-.54,4.55,4.55,0,0,0,.54-1.5Z" fill="#101827"></path>
                        <path d="M10.26,10.26a1.44,1.44,0,1,1-2.88,0,1.44,1.44,0,0,1,2.88,0" fill="#101827"></path>
                        <path d="M16.62,10.26a1.44,1.44,0,1,1-2.88,0,1.44,1.44,0,0,1,2.88,0" fill="#101827"></path>
                    </svg>
                </a>
                <a href="https://www.instagram.com/ashish_zangra/" target="_blank" rel="noopener noreferrer" class="footer-icon text-[#9ca3af] hover:text-[#a78bfa]"><i class="fab fa-instagram fa-2x"></i></a>
            </div>
            <p class="text-sm">&copy; 2024 vizlearn. All Rights Reserved.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- DOM Elements ---
    const svg = document.getElementById('plot-canvas');
    const pointsSlider = document.getElementById('points-slider');
    const pointsValue = document.getElementById('points-value');
    const noiseSlider = document.getElementById('noise-slider');
    const noiseValue = document.getElementById('noise-value');
    const randomizeBtn = document.getElementById('randomize-btn');
    const resetBtn = document.getElementById('reset-btn');
    const maeValue = document.getElementById('mae-value');
    const mseValue = document.getElementById('mse-value');
    const rmseValue = document.getElementById('rmse-value');
    const maeBar = document.getElementById('mae-bar');
    const mseBar = document.getElementById('mse-bar');
    const rmseBar = document.getElementById('rmse-bar');
    const explanationPanel = document.getElementById('explanation-panel');

    // --- State ---
    let state = {
        points: [],
        trueM: 0.8, // Slope
        trueB: 0.2, // Intercept
        numPoints: 50,
        noise: 0.1,
        draggedPoint: null,
        svgBoundingBox: null,
    };

    const SVG_NS = "http://www.w3.org/2000/svg";

    // --- Core Logic ---
    function generateData() {
        state.points = [];
        for (let i = 0; i < state.numPoints; i++) {
            const x = Math.random();
            const error = (Math.random() - 0.5) * 2 * state.noise;
            const y = state.trueM * x + state.trueB + error;
            state.points.push({ id: i, x, y, initialY: y });
        }
    }

    function calculateMetrics() {
        if (state.points.length === 0) return { mae: 0, mse: 0, rmse: 0 };

        let sumAbsError = 0;
        let sumSqError = 0;

        state.points.forEach(p => {
            const trueY = state.trueM * p.x + state.trueB;
            const error = p.y - trueY;
            sumAbsError += Math.abs(error);
            sumSqError += error * error;
        });

        const n = state.points.length;
        const mae = sumAbsError / n;
        const mse = sumSqError / n;
        const rmse = Math.sqrt(mse);

        return { mae, mse, rmse };
    }

    // --- SVG Coordinate Transformation ---
    function toSVGCoords(p) {
        if (!state.svgBoundingBox) return { x: 0, y: 0 };
        const { width, height } = state.svgBoundingBox;
        const padding = 50;
        return {
            x: padding + p.x * (width - 2 * padding),
            y: (height - padding) - p.y * (height - 2 * padding)
        };
    }

    function fromSVGCoords(svgP) {
        if (!state.svgBoundingBox) return { x: 0, y: 0 };
        const { width, height } = state.svgBoundingBox;
        const padding = 50;
        return {
            x: (svgP.x - padding) / (width - 2 * padding),
            y: ((height - padding) - svgP.y) / (height - 2 * padding)
        };
    }
    
    function getSVGPoint(evt) {
        let point = svg.createSVGPoint();
        point.x = evt.clientX;
        point.y = evt.clientY;
        return point.matrixTransform(svg.getScreenCTM().inverse());
    }

    // --- Rendering ---
    function render() {
        svg.innerHTML = ''; // Clear SVG
        state.svgBoundingBox = svg.getBoundingClientRect();

        // Draw Axes and True Line
        const axisGroup = document.createElementNS(SVG_NS, 'g');
        const trueLine = document.createElementNS(SVG_NS, 'line');
        const p1 = toSVGCoords({ x: 0, y: state.trueB });
        const p2 = toSVGCoords({ x: 1, y: state.trueM + state.trueB });
        trueLine.setAttribute('x1', p1.x);
        trueLine.setAttribute('y1', p1.y);
        trueLine.setAttribute('x2', p2.x);
        trueLine.setAttribute('y2', p2.y);
        trueLine.setAttribute('stroke', 'var(--border-color)');
        trueLine.setAttribute('stroke-width', '2');
        trueLine.setAttribute('stroke-dasharray', '5,5');
        axisGroup.appendChild(trueLine);
        svg.appendChild(axisGroup);

        // Draw Error Lines and Points
        const errorLinesGroup = document.createElementNS(SVG_NS, 'g');
        const pointsGroup = document.createElementNS(SVG_NS, 'g');
        
        state.points.forEach(p => {
            const svgP = toSVGCoords(p);
            const trueY = state.trueM * p.x + state.trueB;
            const svgTrueP = toSVGCoords({ x: p.x, y: trueY });
            const error = Math.abs(p.y - trueY);

            // Error Line
            const errorLine = document.createElementNS(SVG_NS, 'line');
            errorLine.setAttribute('x1', svgP.x);
            errorLine.setAttribute('y1', svgP.y);
            errorLine.setAttribute('x2', svgTrueP.x);
            errorLine.setAttribute('y2', svgTrueP.y);
            const errorOpacity = Math.min(0.8, 0.1 + error * 2);
            const errorWidth = 1 + error * 5;
            errorLine.setAttribute('stroke', `rgba(250, 204, 21, ${errorOpacity})`); // warning color with opacity
            errorLine.setAttribute('stroke-width', errorWidth);
            errorLine.classList.add('error-line');
            errorLinesGroup.appendChild(errorLine);

            // Data Point
            const pointEl = document.createElementNS(SVG_NS, 'circle');
            pointEl.setAttribute('cx', svgP.x);
            pointEl.setAttribute('cy', svgP.y);
            pointEl.setAttribute('r', 6);
            pointEl.setAttribute('fill', 'var(--primary-accent)');
            pointEl.classList.add('data-point');
            pointEl.dataset.id = p.id;
            pointsGroup.appendChild(pointEl);
        });
        
        svg.appendChild(errorLinesGroup);
        svg.appendChild(pointsGroup);

        // Update Metrics
        const metrics = calculateMetrics();
        maeValue.textContent = metrics.mae.toFixed(4);
        mseValue.textContent = metrics.mse.toFixed(4);
        rmseValue.textContent = metrics.rmse.toFixed(4);

        // Update Bars (normalize based on a reasonable max error)
        const maxError = 1.5;
        maeBar.style.width = `${Math.min(100, (metrics.mae / (maxError * 0.5)) * 100)}%`;
        mseBar.style.width = `${Math.min(100, (metrics.mse / (maxError * 0.5)) * 100)}%`;
        rmseBar.style.width = `${Math.min(100, (metrics.rmse / (maxError * 0.5)) * 100)}%`;
    }

    function updateExplanation(isOutlier) {
        if (isOutlier) {
            explanationPanel.innerHTML = `
                <p class="text-[#facc15] font-bold">Outlier Detected!</p>
                <p>Notice how MSE and RMSE values grew much faster than MAE. This is because they <strong>square the error</strong>, heavily penalizing large mistakes.</p>
                <p>This makes MAE more robust to outliers, while MSE/RMSE are more sensitive to them.</p>
            `;
        } else {
            explanationPanel.innerHTML = `
                <p>This application visualizes different regression error metrics.</p>
                <p><strong>Drag a point</strong> to see how the errors change in real-time. Try creating an <strong>outlier</strong> by dragging a point far from the line.</p>
            `;
        }
    }

    // --- Event Handlers ---
    function handleInteractionStart(evt) {
        const target = evt.target;
        if (target.classList.contains('data-point')) {
            state.draggedPoint = state.points.find(p => p.id == target.dataset.id);
            if (state.draggedPoint) {
                target.classList.add('dragging');
            }
        }
    }

    function handleInteractionMove(evt) {
        if (state.draggedPoint) {
            evt.preventDefault();
            const svgP = getSVGPoint(evt);
            const dataP = fromSVGCoords(svgP);
            
            // Clamp movement within bounds
            state.draggedPoint.x = Math.max(0, Math.min(1, dataP.x));
            state.draggedPoint.y = Math.max(0, Math.min(1, dataP.y));
            
            const trueY = state.trueM * state.draggedPoint.x + state.trueB;
            const error = Math.abs(state.draggedPoint.y - trueY);
            updateExplanation(error > 0.5); // Threshold for being an "outlier"
            
            render();
        }
    }

    function handleInteractionEnd() {
        if (state.draggedPoint) {
            const pointEl = svg.querySelector(`.data-point[data-id='${state.draggedPoint.id}']`);
            if(pointEl) pointEl.classList.remove('dragging');
            state.draggedPoint = null;
            updateExplanation(false);
        }
    }

    function handleReset() {
        state.points.forEach(p => p.y = p.initialY);
        render();
        updateExplanation(false);
    }

    function handleRandomize() {
        generateData();
        render();
        updateExplanation(false);
    }

    // --- Initialization ---
    function init() {
        // Sliders
        pointsSlider.addEventListener('input', (e) => {
            state.numPoints = parseInt(e.target.value, 10);
            pointsValue.textContent = state.numPoints;
        });
        pointsSlider.addEventListener('change', handleRandomize);

        noiseSlider.addEventListener('input', (e) => {
            state.noise = parseFloat(e.target.value);
            noiseValue.textContent = state.noise.toFixed(2);
        });
        noiseSlider.addEventListener('change', handleRandomize);

        // Buttons
        randomizeBtn.addEventListener('click', handleRandomize);
        resetBtn.addEventListener('click', handleReset);

        // SVG Listeners
        svg.addEventListener('mousedown', handleInteractionStart);
        svg.addEventListener('mousemove', handleInteractionMove);
        svg.addEventListener('mouseup', handleInteractionEnd);
        svg.addEventListener('mouseleave', handleInteractionEnd);
        
        svg.addEventListener('touchstart', handleInteractionStart, { passive: false });
        svg.addEventListener('touchmove', handleInteractionMove, { passive: false });
        svg.addEventListener('touchend', handleInteractionEnd);

        // Initial setup
        generateData();
        render();
        updateExplanation(false);
    }

    init();
});
</script>

<div id="ad-container" style="text-align:center; margin: 24px 0;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5059189524535831"
        crossorigin="anonymous"></script>
</div>
</body>
</html>