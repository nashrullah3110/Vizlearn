<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZT6JM33V5J"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-ZT6JM33V5J');
        </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reinforcement Learning Explorer</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Custom theme configuration */
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a78bfa;
        }
        
        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #a78bfa, #c4b5fd);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #374151;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background: #4b5563;
            transform: translateY(-1px);
        }
        
        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Grid cell styles */
        .grid-cell {
            width: 50px;
            height: 50px;
            border: 1px solid #374151;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: #1f2937;
            transition: all 0.3s ease;
        }
        
        .grid-cell.agent {
            background: rgba(139, 92, 246, 0.3);
        }
        
        .grid-cell.goal {
            background: rgba(16, 185, 129, 0.3);
        }
        
        .grid-cell.hazard {
            background: rgba(239, 68, 68, 0.3);
        }
        
        .grid-cell.path {
            background: rgba(139, 92, 246, 0.1);
        }
        
        /* Q-Table styles */
        .q-table {
            border-collapse: collapse;
            width: 100%;
        }
        
        .q-table th,
        .q-table td {
            border: 1px solid #374151;
            padding: 4px;
            text-align: center;
            font-size: 10px;
        }
        
        .q-table th {
            background: #374151;
            color: #f3f4f6;
        }
        
        .q-table td {
            background: #1f2937;
            color: #9ca3af;
            min-width: 35px;
        }
        
        .q-value {
            padding: 2px;
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .q-value.positive {
            background: rgba(16, 185, 129, 0.3);
            color: #10b981;
        }
        
        .q-value.negative {
            background: rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }
        
        .q-value.flash {
            background: #8b5cf6;
            color: white;
            transform: scale(1.1);
        }
        
        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .bounce {
            animation: bounce 0.5s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Metrics panel */
        .metric-item {
            background: #101827;
            border: 1px solid #374151;
            border-radius: 6px;
            padding: 8px;
            margin: 4px 0;
        }
        
        .metric-label {
            font-size: 10px;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .metric-value {
            font-size: 14px;
            color: #f3f4f6;
            font-weight: bold;
        }
        
        /* Progress indicator */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #374151;
            border-radius: 2px;
            overflow: hidden;
            margin: 8px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a78bfa);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Status indicators */
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            transition: all 0.3s ease;
        }
        
        .status-idle {
            background: #6b7280;
        }
        
        .status-learning {
            background: #8b5cf6;
            animation: pulse 1s infinite;
        }
        
        .status-training {
            background: #f59e0b;
            animation: pulse 0.5s infinite;
        }
        
        .status-complete {
            background: #10b981;
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] flex flex-col min-h-screen">
    <!-- Header -->
    <header class="py-6 px-4 text-center border-b border-[#374151]">
        <h1 class="text-2xl md:text-3xl font-bold text-[#f3f4f6]">
            Reinforcement Learning Explorer
        </h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col lg:flex-row gap-6 p-6">
        <!-- Left Panel: Environment (The "World") -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151] flex flex-col">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-[#f3f4f6]">
                    <i class="fas fa-globe text-[#8b5cf6] mr-2"></i>
                    Environment
                </h2>
                <div class="flex items-center space-x-4 text-sm">
                    <div class="flex items-center">
                        <span class="mr-2">ü§ñ</span>
                        <span class="text-[#9ca3af]">Agent</span>
                    </div>
                    <div class="flex items-center">
                        <span class="mr-2">üèÜ</span>
                        <span class="text-[#9ca3af]">Goal</span>
                    </div>
                    <div class="flex items-center">
                        <span class="mr-2">üî•</span>
                        <span class="text-[#9ca3af]">Hazard</span>
                    </div>
                </div>
            </div>
            
            <!-- Grid World -->
            <div class="flex-grow flex items-center justify-center">
                <div id="gridWorld" class="grid grid-cols-5 gap-0 border-2 border-[#374151] rounded-lg overflow-hidden">
                    <!-- Grid cells will be populated here -->
                </div>
            </div>
            
            <!-- Episode Status -->
            <div class="mt-4 text-center">
                <div class="flex items-center justify-center space-x-4 text-sm">
                    <div class="flex items-center">
                        <div id="statusIndicator" class="status-indicator status-idle"></div>
                        <span id="statusText" class="text-[#9ca3af]">Ready to Learn</span>
                    </div>
                    <div class="text-[#9ca3af]">
                        Path Length: <span id="pathLength" class="text-[#f3f4f6] font-mono">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel: Control & Data Center (The "Brain") -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151] flex flex-col">
            <!-- Controls Section -->
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-4 text-[#f3f4f6]">
                    <i class="fas fa-brain text-[#8b5cf6] mr-2"></i>
                    Learning Controls
                </h2>
                <div class="grid grid-cols-2 gap-3">
                    <button id="nextStepBtn" class="btn-primary py-3 px-4 rounded-lg font-medium text-white flex items-center justify-center">
                        <i class="fas fa-step-forward mr-2"></i>
                        Next Step
                    </button>
                    <button id="runEpisodeBtn" class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center">
                        <i class="fas fa-play mr-2"></i>
                        Run Episode
                    </button>
                    <button id="startTrainingBtn" class="btn-primary py-3 px-4 rounded-lg font-medium text-white flex items-center justify-center">
                        <i class="fas fa-rocket mr-2"></i>
                        Start Training
                    </button>
                    <button id="resetBtn" class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center">
                        <i class="fas fa-undo mr-2"></i>
                        Reset
                    </button>
                </div>
            </div>

            <!-- Live Metrics -->
            <div class="mb-6">
                <h3 class="text-md font-semibold mb-3 text-[#f3f4f6]">
                    <i class="fas fa-chart-line text-[#8b5cf6] mr-2"></i>
                    Live Metrics
                </h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="metric-item">
                        <div class="metric-label">Episode</div>
                        <div id="episodeCount" class="metric-value">1</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Step</div>
                        <div id="stepCount" class="metric-value">0</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Last Action</div>
                        <div id="lastAction" class="metric-value">None</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Reward</div>
                        <div id="lastReward" class="metric-value">0</div>
                    </div>
                </div>
                
                <!-- Training Progress -->
                <div class="mt-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-[#9ca3af]">Training Progress</span>
                        <span id="progressPercent" class="text-xs text-[#9ca3af]">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Q-Table Visualization -->
            <div class="flex-grow">
                <h3 class="text-md font-semibold mb-3 text-[#f3f4f6]">
                    <i class="fas fa-table text-[#8b5cf6] mr-2"></i>
                    Q-Table (Agent's Knowledge)
                </h3>
                <div class="bg-[#101827] border border-[#374151] rounded-lg p-3 h-full overflow-auto">
                    <div class="text-xs text-[#9ca3af] mb-3">
                        Each cell shows expected future rewards for actions: ‚Üë Up, ‚Üì Down, ‚Üê Left, ‚Üí Right
                    </div>
                    <table id="qTable" class="q-table">
                        <!-- Q-table will be populated here -->
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] py-6 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.036 3L4.5 7.73v8.54l7.536 4.73 7.536-4.73V7.73L12.036 3zm5.157 3.74L12 10.5 6.807 6.74 12 4.73l5.193 2.01zm-5.157 12.72l-5.036-3.16V9.04L12 13.08l5.036-4.04v7.26L12.036 19.46z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Global variables
        const GRID_SIZE = 5;
        const ACTIONS = ['up', 'down', 'left', 'right'];
        const ACTION_SYMBOLS = ['‚Üë', '‚Üì', '‚Üê', '‚Üí'];
        
        // RL parameters
        const LEARNING_RATE = 0.1;
        const DISCOUNT_FACTOR = 0.9;
        const EPSILON = 0.1; // Exploration rate
        
        // Environment setup
        let agent = { x: 0, y: 0 };
        let goal = { x: 4, y: 4 };
        let hazards = [{ x: 1, y: 1 }, { x: 2, y: 3 }, { x: 3, y: 1 }];
        
        // Learning state
        let qTable = {};
        let episode = 1;
        let step = 0;
        let isTraining = false;
        let trainingInterval = null;
        let episodePath = [];
        let optimalPath = [];
        
        // DOM elements
        const gridWorld = document.getElementById('gridWorld');
        const qTableElement = document.getElementById('qTable');
        const nextStepBtn = document.getElementById('nextStepBtn');
        const runEpisodeBtn = document.getElementById('runEpisodeBtn');
        const startTrainingBtn = document.getElementById('startTrainingBtn');
        const resetBtn = document.getElementById('resetBtn');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        const episodeCount = document.getElementById('episodeCount');
        const stepCount = document.getElementById('stepCount');
        const lastAction = document.getElementById('lastAction');
        const lastReward = document.getElementById('lastReward');
        const pathLength = document.getElementById('pathLength');
        const progressFill = document.getElementById('progressFill');
        const progressPercent = document.getElementById('progressPercent');
        
        // Initialize the application
        function init() {
            initializeQTable();
            createGridWorld();
            createQTableDisplay();
            updateDisplay();
            setupEventListeners();
            setStatus('idle', 'Ready to Learn');
        }
        
        // Initialize Q-table with zeros
        function initializeQTable() {
            qTable = {};
            for (let x = 0; x < GRID_SIZE; x++) {
                for (let y = 0; y < GRID_SIZE; y++) {
                    const state = `${x},${y}`;
                    qTable[state] = [0, 0, 0, 0]; // [up, down, left, right]
                }
            }
        }
        
        // Create the grid world visualization
        function createGridWorld() {
            gridWorld.innerHTML = '';
            for (let y = 0; y < GRID_SIZE; y++) {
                for (let x = 0; x < GRID_SIZE; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.id = `cell-${x}-${y}`;
                    
                    // Add content based on cell type
                    if (x === agent.x && y === agent.y) {
                        cell.textContent = 'ü§ñ';
                        cell.classList.add('agent');
                    } else if (x === goal.x && y === goal.y) {
                        cell.textContent = 'üèÜ';
                        cell.classList.add('goal');
                    } else if (hazards.some(h => h.x === x && h.y === y)) {
                        cell.textContent = 'üî•';
                        cell.classList.add('hazard');
                    }
                    
                    gridWorld.appendChild(cell);
                }
            }
        }
        
        // Create Q-table display
        function createQTableDisplay() {
            qTableElement.innerHTML = '';
            
            // Create header
            const header = document.createElement('tr');
            header.innerHTML = '<th>State</th><th>‚Üë</th><th>‚Üì</th><th>‚Üê</th><th>‚Üí</th>';
            qTableElement.appendChild(header);
            
            // Create rows for each state
            for (let y = 0; y < GRID_SIZE; y++) {
                for (let x = 0; x < GRID_SIZE; x++) {
                    const row = document.createElement('tr');
                    const state = `${x},${y}`;
                    
                    // State cell
                    const stateCell = document.createElement('td');
                    stateCell.textContent = `(${x},${y})`;
                    stateCell.style.background = '#374151';
                    stateCell.style.color = '#f3f4f6';
                    row.appendChild(stateCell);
                    
                    // Q-value cells
                    for (let i = 0; i < 4; i++) {
                        const qCell = document.createElement('td');
                        const qValue = document.createElement('div');
                        qValue.className = 'q-value';
                        qValue.id = `q-${state}-${i}`;
                        qValue.textContent = '0.00';
                        qCell.appendChild(qValue);
                        row.appendChild(qCell);
                    }
                    
                    qTableElement.appendChild(row);
                }
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            nextStepBtn.addEventListener('click', nextStep);
            runEpisodeBtn.addEventListener('click', runEpisode);
            startTrainingBtn.addEventListener('click', toggleTraining);
            resetBtn.addEventListener('click', reset);
        }
        
        // Get reward for current state
        function getReward(x, y) {
            if (x === goal.x && y === goal.y) return 100;
            if (hazards.some(h => h.x === x && h.y === y)) return -100;
            return -1; // Small penalty for each step
        }
        
        // Check if state is terminal
        function isTerminal(x, y) {
            return (x === goal.x && y === goal.y) || hazards.some(h => h.x === x && h.y === y);
        }
        
        // Choose action using epsilon-greedy policy
        function chooseAction(state) {
            if (Math.random() < EPSILON && isTraining) {
                // Explore: random action
                return Math.floor(Math.random() * 4);
            } else {
                // Exploit: best action
                const qValues = qTable[state];
                return qValues.indexOf(Math.max(...qValues));
            }
        }
        
        // Execute action and return new state
        function executeAction(action) {
            let newX = agent.x;
            let newY = agent.y;
            
            switch (action) {
                case 0: // up
                    newY = Math.max(0, agent.y - 1);
                    break;
                case 1: // down
                    newY = Math.min(GRID_SIZE - 1, agent.y + 1);
                    break;
                case 2: // left
                    newX = Math.max(0, agent.x - 1);
                    break;
                case 3: // right
                    newX = Math.min(GRID_SIZE - 1, agent.x + 1);
                    break;
            }
            
            return { x: newX, y: newY };
        }
        
        // Update Q-table using Q-learning algorithm
        function updateQTable(state, action, reward, nextState) {
            const currentQ = qTable[state][action];
            const maxNextQ = Math.max(...qTable[nextState]);
            const newQ = currentQ + LEARNING_RATE * (reward + DISCOUNT_FACTOR * maxNextQ - currentQ);
            qTable[state][action] = newQ;
            
            // Flash the updated Q-value
            flashQValue(state, action);
        }
        
        // Flash Q-value to show update
        function flashQValue(state, action) {
            const qValueElement = document.getElementById(`q-${state}-${action}`);
            if (qValueElement) {
                qValueElement.classList.add('flash');
                setTimeout(() => {
                    qValueElement.classList.remove('flash');
                }, 300);
            }
        }
        
        // Take one step in the environment
        function nextStep() {
            if (isTerminal(agent.x, agent.y)) {
                resetEpisode();
                return;
            }
            
            const state = `${agent.x},${agent.y}`;
            const action = chooseAction(state);
            const newPosition = executeAction(action);
            const reward = getReward(newPosition.x, newPosition.y);
            const nextState = `${newPosition.x},${newPosition.y}`;
            
            // Update Q-table
            updateQTable(state, action, reward, nextState);
            
            // Move agent
            agent.x = newPosition.x;
            agent.y = newPosition.y;
            episodePath.push({ x: agent.x, y: agent.y });
            
            // Update metrics
            step++;
            lastAction.textContent = ACTION_SYMBOLS[action];
            lastReward.textContent = reward > 0 ? `+${reward}` : reward;
            lastReward.style.color = reward > 0 ? '#10b981' : reward < 0 ? '#ef4444' : '#9ca3af';
            
            updateDisplay();
            
            // Check if episode is complete
            if (isTerminal(agent.x, agent.y)) {
                setTimeout(() => {
                    resetEpisode();
                }, 1000);
            }
        }
        
        // Run complete episode
        function runEpisode() {
            if (isTraining) return;
            
            setStatus('learning', 'Running Episode...');
            disableControls(true);
            
            const episodeInterval = setInterval(() => {
                if (isTerminal(agent.x, agent.y)) {
                    clearInterval(episodeInterval);
                    setTimeout(() => {
                        resetEpisode();
                        setStatus('idle', 'Episode Complete');
                        disableControls(false);
                    }, 1000);
                    return;
                }
                
                nextStep();
            }, 200);
        }
        
        // Toggle training mode
        function toggleTraining() {
            if (isTraining) {
                stopTraining();
            } else {
                startTraining();
            }
        }
        
        // Start training mode
        function startTraining() {
            isTraining = true;
            setStatus('training', 'Training in Progress...');
            startTrainingBtn.innerHTML = '<i class="fas fa-stop mr-2"></i>Stop Training';
            startTrainingBtn.classList.remove('btn-primary');
            startTrainingBtn.classList.add('btn-secondary');
            disableControls(true, false);
            
            let episodesCompleted = 0;
            const maxEpisodes = 500;
            
            trainingInterval = setInterval(() => {
                if (episodesCompleted >= maxEpisodes) {
                    stopTraining();
                    findOptimalPath();
                    return;
                }
                
                if (isTerminal(agent.x, agent.y)) {
                    episodesCompleted++;
                    resetEpisode(false);
                    
                    // Update progress
                    const progress = (episodesCompleted / maxEpisodes) * 100;
                    progressFill.style.width = progress + '%';
                    progressPercent.textContent = Math.round(progress) + '%';
                } else {
                    nextStep();
                }
            }, 10);
        }
        
        // Stop training mode
        function stopTraining() {
            isTraining = false;
            if (trainingInterval) {
                clearInterval(trainingInterval);
                trainingInterval = null;
            }
            
            setStatus('complete', 'Training Complete');
            startTrainingBtn.innerHTML = '<i class="fas fa-rocket mr-2"></i>Start Training';
            startTrainingBtn.classList.remove('btn-secondary');
            startTrainingBtn.classList.add('btn-primary');
            disableControls(false);
            
            findOptimalPath();
        }
        
        // Find optimal path using learned Q-values
        function findOptimalPath() {
            optimalPath = [];
            let currentX = 0, currentY = 0;
            const visited = new Set();
            
            while (!isTerminal(currentX, currentY) && !visited.has(`${currentX},${currentY}`)) {
                visited.add(`${currentX},${currentY}`);
                optimalPath.push({ x: currentX, y: currentY });
                
                const state = `${currentX},${currentY}`;
                const qValues = qTable[state];
                const bestAction = qValues.indexOf(Math.max(...qValues));
                const newPosition = executeAction(bestAction);
                
                // Move to new position
                currentX = newPosition.x;
                currentY = newPosition.y;
            }
            
            if (isTerminal(currentX, currentY)) {
                optimalPath.push({ x: currentX, y: currentY });
            }
            
            updateDisplay();
        }
        
        // Reset episode
        function resetEpisode(updateEpisodeCount = true) {
            agent.x = 0;
            agent.y = 0;
            step = 0;
            episodePath = [];
            
            if (updateEpisodeCount) {
                episode++;
            }
            
            updateDisplay();
        }
        
        // Reset everything
        function reset() {
            stopTraining();
            agent.x = 0;
            agent.y = 0;
            episode = 1;
            step = 0;
            episodePath = [];
            optimalPath = [];
            initializeQTable();
            
            progressFill.style.width = '0%';
            progressPercent.textContent = '0%';
            lastAction.textContent = 'None';
            lastReward.textContent = '0';
            lastReward.style.color = '#9ca3af';
            
            setStatus('idle', 'Ready to Learn');
            updateDisplay();
        }
        
        // Set status indicator
        function setStatus(status, text) {
            statusIndicator.className = `status-indicator status-${status}`;
            statusText.textContent = text;
        }
        
        // Disable/enable controls
        function disableControls(disabled, excludeTraining = true) {
            nextStepBtn.disabled = disabled;
            runEpisodeBtn.disabled = disabled;
            resetBtn.disabled = disabled;
            
            if (!excludeTraining) {
                startTrainingBtn.disabled = disabled;
            }
        }
        
        // Update all displays
        function updateDisplay() {
            updateGridDisplay();
            updateQTableDisplay();
            updateMetrics();
        }
        
        // Update grid world display
        function updateGridDisplay() {
            // Clear all cells
            for (let y = 0; y < GRID_SIZE; y++) {
                for (let x = 0; x < GRID_SIZE; x++) {
                    const cell = document.getElementById(`cell-${x}-${y}`);
                    cell.className = 'grid-cell';
                    cell.textContent = '';
                    
                    // Add path highlighting for optimal path
                    if (optimalPath.some(p => p.x === x && p.y === y)) {
                        cell.classList.add('path');
                    }
                    
                    // Add content based on cell type
                    if (x === agent.x && y === agent.y) {
                        cell.textContent = 'ü§ñ';
                        cell.classList.add('agent');
                    } else if (x === goal.x && y === goal.y) {
                        cell.textContent = 'üèÜ';
                        cell.classList.add('goal');
                    } else if (hazards.some(h => h.x === x && h.y === y)) {
                        cell.textContent = 'üî•';
                        cell.classList.add('hazard');
                    }
                }
            }
        }
        
        // Update Q-table display
        function updateQTableDisplay() {
            for (let y = 0; y < GRID_SIZE; y++) {
                for (let x = 0; x < GRID_SIZE; x++) {
                    const state = `${x},${y}`;
                    const qValues = qTable[state];
                    
                    for (let i = 0; i < 4; i++) {
                        const qValueElement = document.getElementById(`q-${state}-${i}`);
                        if (qValueElement) {
                            const value = qValues[i];
                            qValueElement.textContent = value.toFixed(2);
                            
                            // Color based on value
                            qValueElement.className = 'q-value';
                            if (value > 0) {
                                qValueElement.classList.add('positive');
                            } else if (value < 0) {
                                qValueElement.classList.add('negative');
                            }
                        }
                    }
                }
            }
        }
        
        // Update metrics display
        function updateMetrics() {
            episodeCount.textContent = episode;
            stepCount.textContent = step;
            pathLength.textContent = episodePath.length;
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
<div id="ad-container" style="text-align:center; margin: 24px 0;">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5059189524535831"
        crossorigin="anonymous"></script>
</div>
</body>
</html>
