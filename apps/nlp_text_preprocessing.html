<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLP: Text Preprocessing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        .token {
            display: inline-block;
            padding: 4px 8px;
            margin: 2px;
            border: 1px solid #374151;
            border-radius: 4px;
            background-color: #1f2937;
            color: #f3f4f6;
            transition: all 0.3s ease;
        }
        
        .token.removed {
            opacity: 0;
            transform: scale(0.8);
            margin: 0;
            padding: 0;
            border: none;
            overflow: hidden;
            width: 0;
        }
        
        .token.changed {
            background-color: #8b5cf6;
            animation: flash 0.5s ease-in-out;
        }
        
        @keyframes flash {
            0%, 100% { background-color: #8b5cf6; }
            50% { background-color: #a78bfa; }
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: 0.3s;
            border-radius: 30px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: #9ca3af;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #8b5cf6;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
            background-color: #f3f4f6;
        }
        
        .radio-button {
            position: relative;
            display: inline-block;
            margin-right: 20px;
        }
        
        .radio-button input[type="radio"] {
            opacity: 0;
            position: absolute;
        }
        
        .radio-button label {
            display: flex;
            align-items: center;
            cursor: pointer;
            color: #9ca3af;
            transition: color 0.3s ease;
        }
        
        .radio-button label:before {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #374151;
            border-radius: 50%;
            margin-right: 8px;
            transition: all 0.3s ease;
        }
        
        .radio-button input[type="radio"]:checked + label {
            color: #f3f4f6;
        }
        
        .radio-button input[type="radio"]:checked + label:before {
            border-color: #8b5cf6;
            background-color: #8b5cf6;
            box-shadow: inset 0 0 0 3px #1f2937;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid #374151;
            background-color: #1f2937;
            color: #f3f4f6;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #374151;
            border-color: #8b5cf6;
        }
        
        .btn:active {
            background-color: #8b5cf6;
            transform: translateY(1px);
        }
        
        .social-icon {
            color: #9ca3af;
            transition: color 0.3s ease;
            text-decoration: none;
        }
        
        .social-icon:hover {
            color: #a78bfa;
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] flex flex-col min-h-screen">
    <!-- Header -->
    <header class="text-center py-8">
        <h1 class="text-3xl font-bold">NLP: Text Preprocessing</h1>
    </header>

    <!-- Main Content Grid -->
    <main class="flex-grow grid grid-cols-1 lg:grid-cols-3 gap-6 px-6 pb-6">
        <!-- Control Panel -->
        <div class="bg-[#1f2937] rounded-lg p-6 border border-[#374151]">
            <h2 class="text-xl font-semibold mb-4">Controls</h2>
            
            <!-- Original Text Display -->
            <div class="mb-6">
                <h3 class="text-sm font-medium mb-2 text-[#9ca3af]">Original Text:</h3>
                <div id="originalText" class="bg-[#101827] p-3 rounded border border-[#374151] text-sm">
                    The cats are running quickly in the beautiful garden!
                </div>
            </div>

            <!-- Preprocessing Steps -->
            <div class="space-y-4 mb-6">
                <h3 class="text-lg font-medium mb-3">Preprocessing Steps</h3>
                
                <div class="flex items-center justify-between">
                    <label for="lowercase" class="text-sm">Lowercase</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lowercase">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <label for="removePunctuation" class="text-sm">Remove Punctuation</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="removePunctuation">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <label for="removeStopwords" class="text-sm">Remove Stopwords</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="removeStopwords">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <!-- Normalization Options -->
                <div class="border-t border-[#374151] pt-4">
                    <h4 class="text-sm font-medium mb-2 text-[#9ca3af]">Normalization (Choose one):</h4>
                    <div class="space-y-2">
                        <div class="radio-button">
                            <input type="radio" id="none" name="normalization" value="none" checked>
                            <label for="none">None</label>
                        </div>
                        <div class="radio-button">
                            <input type="radio" id="stemming" name="normalization" value="stemming">
                            <label for="stemming">Stemming</label>
                        </div>
                        <div class="radio-button">
                            <input type="radio" id="lemmatization" name="normalization" value="lemmatization">
                            <label for="lemmatization">Lemmatization</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="space-y-3">
                <button id="randomizeBtn" class="btn w-full">Randomize Text</button>
                <button id="resetBtn" class="btn w-full">Reset All</button>
            </div>
        </div>

        <!-- Visualization Panel -->
        <div class="bg-[#1f2937] rounded-lg p-6 border border-[#374151]">
            <h2 class="text-xl font-semibold mb-4">Text Visualization</h2>
            <div id="tokenContainer" class="bg-[#101827] p-4 rounded border border-[#374151] min-h-32 text-center">
                <!-- Tokens will be dynamically inserted here -->
            </div>
        </div>

        <!-- Explanation Panel -->
        <div class="bg-[#1f2937] rounded-lg p-6 border border-[#374151]">
            <h2 class="text-xl font-semibold mb-4">Explanation</h2>
            <div id="explanationContent" class="text-sm leading-relaxed text-[#9ca3af]">
                <p class="mb-3">Text preprocessing is the process of transforming raw text into a format suitable for machine learning models.</p>
                <p class="mb-3">Each preprocessing step serves a specific purpose:</p>
                <ul class="list-disc list-inside space-y-1">
                    <li>Standardizing text format</li>
                    <li>Reducing noise and irrelevant information</li>
                    <li>Normalizing vocabulary</li>
                    <li>Improving model performance</li>
                </ul>
                <p class="mt-3">Select preprocessing steps to see how they transform the text!</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] py-6 mt-auto">
        <div class="flex justify-center space-x-8">
            <a href="https://www.linkedin.com/in/ashish-jangra/" class="social-icon" target="_blank">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" class="social-icon" target="_blank">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" class="social-icon" target="_blank">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" class="social-icon" target="_blank">
                <svg class="w-8 h-8 fill-current" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.93-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v-.07zM17.9 17.39c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" class="social-icon" target="_blank">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Sample sentences for randomization
        const sampleSentences = [
            "The cats are running quickly in the beautiful garden!",
            "She's reading an interesting book about machine learning.",
            "The students were studying hard for their upcoming exams.",
            "I love eating pizza on Friday nights with my friends!",
            "The weather is absolutely gorgeous today, isn't it?",
            "They're building a new shopping center downtown.",
            "My grandmother makes the best cookies in the world.",
            "The conference speakers discussed exciting new technologies."
        ];

        // Stopwords list
        const stopwords = new Set([
            'a', 'an', 'and', 'are', 'as', 'at', 'be', 'by', 'for', 'from', 'has', 'he', 
            'in', 'is', 'it', 'its', 'of', 'on', 'that', 'the', 'to', 'was', 'will', 
            'with', 'the', 'this', 'they', 'i', 'my', 'we', 'she', 'her', 'his', 'their'
        ]);

        // Simple stemming rules
        const stemmingRules = {
            'running': 'run',
            'quickly': 'quick',
            'beautiful': 'beauti',
            'reading': 'read',
            'interesting': 'interest',
            'studying': 'studi',
            'upcoming': 'upcom',
            'eating': 'eat',
            'building': 'build',
            'shopping': 'shop',
            'makes': 'make',
            'cookies': 'cooki',
            'speakers': 'speaker',
            'discussed': 'discuss',
            'technologies': 'technolog',
            'cats': 'cat',
            'friends': 'friend',
            'students': 'student',
            'exams': 'exam',
            'nights': 'night'
        };

        // Simple lemmatization rules
        const lemmatizationRules = {
            'running': 'run',
            'cats': 'cat',
            'are': 'be',
            'reading': 'read',
            'students': 'student',
            'studying': 'study',
            'exams': 'exam',
            'eating': 'eat',
            'friends': 'friend',
            'nights': 'night',
            'building': 'build',
            'makes': 'make',
            'cookies': 'cookie',
            'speakers': 'speaker',
            'discussed': 'discuss',
            'technologies': 'technology'
        };

        let currentText = sampleSentences[0];
        let tokens = [];
        let processedTokens = [];

        // DOM elements
        const tokenContainer = document.getElementById('tokenContainer');
        const originalTextDiv = document.getElementById('originalText');
        const explanationContent = document.getElementById('explanationContent');
        
        // Control elements
        const lowercaseCheckbox = document.getElementById('lowercase');
        const removePunctuationCheckbox = document.getElementById('removePunctuation');
        const removeStopwordsCheckbox = document.getElementById('removeStopwords');
        const normalizationRadios = document.querySelectorAll('input[name="normalization"]');
        const randomizeBtn = document.getElementById('randomizeBtn');
        const resetBtn = document.getElementById('resetBtn');

        // Initialize the application
        function init() {
            updateTokens();
            updateVisualization();
        }

        // Tokenize text into words and punctuation
        function tokenize(text) {
            return text.match(/\w+|[^\w\s]/g) || [];
        }

        // Update tokens from current text
        function updateTokens() {
            tokens = tokenize(currentText);
            processedTokens = [...tokens];
        }

        // Apply all selected preprocessing steps
        function applyPreprocessing() {
            processedTokens = [...tokens];
            
            // Apply lowercase
            if (lowercaseCheckbox.checked) {
                processedTokens = processedTokens.map(token => token.toLowerCase());
            }
            
            // Remove punctuation
            if (removePunctuationCheckbox.checked) {
                processedTokens = processedTokens.filter(token => /\w/.test(token));
            }
            
            // Remove stopwords
            if (removeStopwordsCheckbox.checked) {
                processedTokens = processedTokens.filter(token => 
                    !stopwords.has(token.toLowerCase()) || !/\w/.test(token)
                );
            }
            
            // Apply normalization
            const normalizationType = document.querySelector('input[name="normalization"]:checked').value;
            if (normalizationType === 'stemming') {
                processedTokens = processedTokens.map(token => 
                    stemmingRules[token.toLowerCase()] || token
                );
            } else if (normalizationType === 'lemmatization') {
                processedTokens = processedTokens.map(token => 
                    lemmatizationRules[token.toLowerCase()] || token
                );
            }
        }

        // Update the visual representation
        function updateVisualization() {
            applyPreprocessing();
            
            tokenContainer.innerHTML = '';
            
            let processedIndex = 0;
            tokens.forEach((originalToken, index) => {
                const tokenElement = document.createElement('span');
                tokenElement.className = 'token';
                
                // Check if this token was removed
                let shouldRemove = false;
                
                if (removePunctuationCheckbox.checked && !/\w/.test(originalToken)) {
                    shouldRemove = true;
                }
                
                if (removeStopwordsCheckbox.checked && stopwords.has(originalToken.toLowerCase()) && /\w/.test(originalToken)) {
                    shouldRemove = true;
                }
                
                if (shouldRemove) {
                    tokenElement.textContent = originalToken;
                    tokenElement.classList.add('removed');
                } else {
                    const processedToken = processedTokens[processedIndex];
                    tokenElement.textContent = processedToken;
                    
                    // Check if token was changed
                    if (processedToken !== originalToken) {
                        tokenElement.classList.add('changed');
                        setTimeout(() => tokenElement.classList.remove('changed'), 500);
                    }
                    
                    processedIndex++;
                }
                
                tokenContainer.appendChild(tokenElement);
            });
        }

        // Update explanation based on current state
        function updateExplanation(stepName) {
            const explanations = {
                lowercase: {
                    title: "Lowercase Conversion",
                    description: "Converting all text to lowercase ensures consistency and reduces vocabulary size.",
                    purpose: "This prevents the model from treating 'The' and 'the' as different words.",
                    example: "Example: 'The' → 'the', 'RUNNING' → 'running'"
                },
                removePunctuation: {
                    title: "Punctuation Removal",
                    description: "Removing punctuation marks that don't contribute to meaning.",
                    purpose: "This focuses the model on word content rather than sentence structure.",
                    example: "Removed: " + tokens.filter(token => !/\w/.test(token)).join(', ')
                },
                removeStopwords: {
                    title: "Stopword Removal",
                    description: "Removing common words that don't carry significant meaning.",
                    purpose: "This reduces noise and focuses on content-bearing words.",
                    example: "Removed: " + tokens.filter(token => stopwords.has(token.toLowerCase())).join(', ')
                },
                stemming: {
                    title: "Stemming",
                    description: "Reducing words to their root form using simple rules.",
                    purpose: "This groups related words together (e.g., 'running', 'runs' → 'run').",
                    example: "Words with multiple forms are reduced to common stems."
                },
                lemmatization: {
                    title: "Lemmatization",
                    description: "Converting words to their dictionary form (lemma).",
                    purpose: "This is more accurate than stemming as it considers word context.",
                    example: "Words are converted to their base dictionary forms."
                }
            };
            
            if (explanations[stepName]) {
                const exp = explanations[stepName];
                explanationContent.innerHTML = `
                    <h3 class="text-lg font-semibold mb-3 text-[#f3f4f6]">${exp.title}</h3>
                    <p class="mb-3">${exp.description}</p>
                    <p class="mb-3"><strong>Purpose:</strong> ${exp.purpose}</p>
                    <p class="text-[#8b5cf6]">${exp.example}</p>
                `;
            }
        }

        // Event listeners
        lowercaseCheckbox.addEventListener('change', function() {
            updateVisualization();
            if (this.checked) updateExplanation('lowercase');
        });

        removePunctuationCheckbox.addEventListener('change', function() {
            updateVisualization();
            if (this.checked) updateExplanation('removePunctuation');
        });

        removeStopwordsCheckbox.addEventListener('change', function() {
            updateVisualization();
            if (this.checked) updateExplanation('removeStopwords');
        });

        normalizationRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                updateVisualization();
                if (this.value !== 'none') {
                    updateExplanation(this.value);
                }
            });
        });

        randomizeBtn.addEventListener('click', function() {
            const randomIndex = Math.floor(Math.random() * sampleSentences.length);
            currentText = sampleSentences[randomIndex];
            originalTextDiv.textContent = currentText;
            updateTokens();
            updateVisualization();
        });

        resetBtn.addEventListener('click', function() {
            lowercaseCheckbox.checked = false;
            removePunctuationCheckbox.checked = false;
            removeStopwordsCheckbox.checked = false;
            document.getElementById('none').checked = true;
            updateVisualization();
            
            explanationContent.innerHTML = `
                <p class="mb-3">Text preprocessing is the process of transforming raw text into a format suitable for machine learning models.</p>
                <p class="mb-3">Each preprocessing step serves a specific purpose:</p>
                <ul class="list-disc list-inside space-y-1">
                    <li>Standardizing text format</li>
                    <li>Reducing noise and irrelevant information</li>
                    <li>Normalizing vocabulary</li>
                    <li>Improving model performance</li>
                </ul>
                <p class="mt-3">Select preprocessing steps to see how they transform the text!</p>
            `;
        });

        // Initialize the application
        init();
    </script>
</body>
</html>
