<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZT6JM33V5J"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-ZT6JM33V5J');
        </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Language Modeling (GPT) Interactive</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        .panel {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .input-textarea {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            border-radius: 8px;
            padding: 12px;
            width: 100%;
            min-height: 120px;
            resize: none;
            font-family: 'Roboto Mono', monospace;
            transition: border-color 0.3s ease;
        }
        
        .input-textarea:focus {
            outline: none;
            border-color: #8b5cf6;
        }
        
        .input-textarea::placeholder {
            color: #9ca3af;
        }
        
        .btn-primary {
            background: transparent;
            color: #f3f4f6;
            border: 2px solid #374151;
            padding: 12px 20px;
            border-radius: 8px;
            font-family: 'Roboto Mono', monospace;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #a78bfa;
            border-color: #a78bfa;
            color: white;
        }
        
        .btn-primary.active {
            background: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        .btn-primary:disabled {
            color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .text-display {
            background: #374151;
            border-radius: 8px;
            padding: 16px;
            color: #f3f4f6;
            font-family: 'Roboto Mono', monospace;
            line-height: 1.6;
            min-height: 60px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .prompt-text {
            color: #f3f4f6;
        }
        
        .generated-text {
            color: #8b5cf6;
            font-weight: 500;
        }
        
        .cursor-blink {
            animation: blink 1s infinite;
            color: #8b5cf6;
            font-weight: bold;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .token-probability {
            background: #374151;
            border-radius: 8px;
            padding: 16px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .token-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 6px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        
        .token-item.selected {
            background: rgba(139, 92, 246, 0.3);
            border-color: #8b5cf6;
        }
        
        .token-word {
            font-weight: 500;
            color: #f3f4f6;
        }
        
        .token-item.selected .token-word {
            color: #8b5cf6;
            font-weight: bold;
        }
        
        .token-score {
            color: #9ca3af;
            font-size: 12px;
        }
        
        .token-item.selected .token-score {
            color: #a78bfa;
        }
        
        .section-label {
            font-size: 14px;
            font-weight: 600;
            color: #f3f4f6;
            margin-bottom: 12px;
            display: block;
        }
        
        .section-description {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 16px;
        }
        
        .temperature-slider {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            outline: none;
            width: 100%;
        }
        
        .temperature-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8b5cf6;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
            transition: all 0.3s ease;
        }
        
        .temperature-slider::-webkit-slider-thumb:hover {
            background: #a78bfa;
            transform: scale(1.1);
        }
        
        .social-icon {
            color: #9ca3af;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            color: #a78bfa;
            transform: translateY(-2px);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typing-animation {
            animation: typing 0.5s ease-in-out;
        }
        
        @keyframes typing {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @media (max-width: 1023px) {
            .main-content {
                flex-direction: column !important;
            }
            
            .panel {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] min-h-screen flex flex-col">
    
    <!-- Header -->
    <header class="border-b border-[#374151] p-6">
        <h1 class="text-2xl font-bold text-center">Causal Language Modeling (GPT)</h1>
    </header>
    
    <!-- Main Content -->
    <main class="flex-1 flex main-content p-6 gap-6">
        
        <!-- Input & Controls Panel (Left) -->
        <div class="panel w-full lg:w-1/2">
            <div class="space-y-6">
                <!-- Input Prompt Section -->
                <div>
                    <label class="section-label">1. Enter Your Prompt</label>
                    <p class="section-description">
                        Type a prompt to start text generation. The model will predict the next words one by one, using only the preceding context.
                    </p>
                    <textarea 
                        id="input-prompt" 
                        class="input-textarea" 
                        placeholder="Once upon a time, in a distant galaxy..."
                    ></textarea>
                </div>
                
                <!-- Temperature Control -->
                <div>
                    <label class="section-label">Temperature: <span id="temperature-value" class="text-[#8b5cf6]">0.7</span></label>
                    <p class="section-description">
                        Controls randomness: Low (0.1) = predictable, High (1.0) = creative
                    </p>
                    <input type="range" id="temperature-slider" class="temperature-slider" min="0.1" max="1.0" step="0.1" value="0.7">
                </div>
                
                <!-- Control Buttons Section -->
                <div>
                    <label class="section-label">2. Controls</label>
                    <div class="space-y-3">
                        <button id="generate-btn" class="btn-primary w-full" disabled>
                            <i class="fas fa-play mr-2"></i>Start Generation
                        </button>
                        <button id="next-token-btn" class="btn-primary w-full" disabled>
                            <i class="fas fa-step-forward mr-2"></i>Generate Next Token
                        </button>
                        <button id="auto-generate-btn" class="btn-primary w-full" disabled>
                            <i class="fas fa-robot mr-2"></i>Auto Generate (5 tokens)
                        </button>
                        <button id="reset-btn" class="btn-primary w-full">
                            <i class="fas fa-undo mr-2"></i>Reset
                        </button>
                    </div>
                </div>
                
                <!-- Process Explanation -->
                <div class="bg-[#8b5cf6] bg-opacity-10 border border-[#8b5cf6] border-opacity-30 rounded-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-[#8b5cf6]">How CLM Works:</h3>
                    <div class="text-xs text-[#9ca3af] space-y-1">
                        <div>1. Input a prompt or starting text</div>
                        <div>2. Model predicts next token based on context</div>
                        <div>3. Selected token is added to the sequence</div>
                        <div>4. Process repeats with expanded context</div>
                        <div>5. No access to future tokens (causal masking)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Visualization Panel (Right) -->
        <div class="panel w-full lg:w-1/2">
            <div class="space-y-6">
                <!-- Generated Text Display -->
                <div>
                    <label class="section-label">Generated Text</label>
                    <div id="generated-display" class="text-display">
                        <span class="text-[#9ca3af]">Enter a prompt to begin generation...</span>
                    </div>
                </div>
                
                <!-- Current Context Display -->
                <div>
                    <label class="section-label">Current Context Window</label>
                    <p class="section-description">
                        Text that the model can see when predicting the next token
                    </p>
                    <div id="context-display" class="text-display text-[#9ca3af]">
                        Click "Start Generation" to see the context...
                    </div>
                </div>
                
                <!-- Next Token Predictions -->
                <div>
                    <label class="section-label">Next Token Predictions</label>
                    <p class="section-description">
                        Top candidates for the next token with probability scores
                    </p>
                    <div id="prediction-container" class="token-probability">
                        <div class="text-[#9ca3af] text-center py-8">
                            Generate tokens to see predictions...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </main>
    
    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] p-6 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" aria-label="LinkedIn" class="social-icon">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" aria-label="GitHub" class="social-icon">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" aria-label="Kaggle" class="social-icon">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" aria-label="Hugging Face" class="social-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v-.07zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" aria-label="Instagram" class="social-icon">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>
    
    <script>
        // Application state
        let currentPrompt = '';
        let generatedTokens = [];
        let currentState = 'initial'; // 'initial', 'generating', 'auto-generating'
        let autoGenerateInterval = null;
        let temperature = 0.7;
        
        // Predefined token continuations for realistic generation
        const tokenContinuations = {
            'once': ['upon', 'again', 'more', 'there', 'I'],
            'upon': ['a', 'the', 'this', 'reaching', 'reflection'],
            'a': ['time', 'day', 'man', 'woman', 'beautiful', 'dark', 'long', 'small', 'great'],
            'time': [',', 'ago', 'when', 'has', 'will', 'passed', 'before'],
            'in': ['a', 'the', 'this', 'that', 'his', 'her', 'space', 'time'],
            'the': ['forest', 'city', 'house', 'world', 'sky', 'ocean', 'mountains', 'darkness', 'light'],
            'and': ['then', 'so', 'yet', 'now', 'there', 'he', 'she', 'they'],
            'was': ['a', 'the', 'very', 'quite', 'always', 'never', 'once', 'still'],
            'she': ['was', 'had', 'could', 'would', 'walked', 'ran', 'smiled', 'looked'],
            'he': ['was', 'had', 'could', 'would', 'walked', 'ran', 'smiled', 'looked'],
            'it': ['was', 'had', 'could', 'would', 'seemed', 'appeared', 'felt'],
            'to': ['the', 'be', 'go', 'see', 'find', 'make', 'take', 'give'],
            'of': ['the', 'a', 'an', 'his', 'her', 'their', 'magic', 'wonder'],
            'with': ['a', 'the', 'his', 'her', 'their', 'great', 'little'],
            'for': ['a', 'the', 'his', 'her', 'their', 'many', 'several'],
            'that': ['was', 'had', 'would', 'could', 'seemed', 'appeared'],
            'as': ['the', 'he', 'she', 'it', 'they', 'if', 'though'],
            'is': ['a', 'the', 'not', 'very', 'quite', 'always', 'still'],
            'his': ['eyes', 'hand', 'face', 'voice', 'heart', 'mind', 'life'],
            'her': ['eyes', 'hand', 'face', 'voice', 'heart', 'mind', 'life'],
            'but': ['the', 'he', 'she', 'it', 'they', 'then', 'now'],
            'had': ['been', 'always', 'never', 'once', 'already', 'just'],
            'were': ['not', 'very', 'quite', 'always', 'never', 'still'],
            'they': ['were', 'had', 'could', 'would', 'walked', 'ran'],
            'there': ['was', 'were', 'had', 'would', 'could', 'seemed'],
            'been': ['a', 'the', 'very', 'quite', 'always', 'waiting'],
            'have': ['been', 'always', 'never', 'just', 'already'],
            'from': ['the', 'a', 'his', 'her', 'their', 'far', 'above'],
            'or': ['the', 'a', 'an', 'perhaps', 'maybe', 'not'],
            'one': ['day', 'night', 'moment', 'of', 'who', 'that'],
            'would': ['be', 'have', 'go', 'come', 'take', 'make'],
            'could': ['be', 'have', 'go', 'see', 'hear', 'feel'],
            'their': ['eyes', 'hands', 'faces', 'voices', 'hearts'],
            'what': ['was', 'had', 'would', 'could', 'seemed'],
            'all': ['the', 'of', 'that', 'who', 'around'],
            'when': ['the', 'he', 'she', 'it', 'they', 'I'],
            'out': ['of', 'from', 'into', 'through', 'across'],
            'if': ['the', 'he', 'she', 'it', 'they', 'you'],
            'up': ['at', 'to', 'from', 'into', 'through'],
            'so': ['the', 'he', 'she', 'it', 'they', 'many'],
            'said': ['the', 'he', 'she', 'it', 'that', 'nothing'],
            'each': ['of', 'one', 'day', 'time', 'moment'],
            'which': ['was', 'had', 'would', 'could', 'seemed'],
            'do': ['you', 'not', 'we', 'they', 'I'],
            'how': ['to', 'the', 'he', 'she', 'it', 'many'],
            'its': ['way', 'place', 'time', 'light', 'power'],
            'who': ['was', 'had', 'would', 'could', 'seemed'],
            'oil': ['and', 'or', 'in', 'from', 'with'],
            'sit': ['down', 'up', 'here', 'there', 'quietly'],
            'now': ['the', 'he', 'she', 'it', 'they', 'I'],
            'find': ['the', 'a', 'his', 'her', 'their', 'out'],
            'long': ['time', 'ago', 'before', 'journey', 'road'],
            'down': ['the', 'to', 'from', 'into', 'through'],
            'day': ['was', 'had', 'would', 'came', 'broke'],
            'get': ['the', 'a', 'to', 'out', 'up', 'back'],
            'use': ['the', 'a', 'it', 'them', 'this'],
            'man': ['was', 'had', 'would', 'could', 'walked'],
            'new': ['world', 'life', 'day', 'beginning', 'hope'],
            'way': ['to', 'of', 'through', 'across', 'around'],
            'may': ['be', 'have', 'come', 'go', 'seem'],
            'say': ['that', 'the', 'he', 'she', 'it'],
            'here': ['in', 'on', 'at', 'was', 'is'],
            'must': ['be', 'have', 'go', 'come', 'take'],
            'such': ['a', 'as', 'is', 'was', 'beauty'],
            'me': ['that', 'the', 'he', 'she', 'it'],
            'even': ['the', 'he', 'she', 'it', 'though'],
            'most': ['of', 'people', 'important', 'beautiful'],
            'made': ['of', 'from', 'by', 'with', 'for'],
            'after': ['the', 'a', 'he', 'she', 'it'],
            'also': ['the', 'he', 'she', 'it', 'has'],
            'did': ['not', 'the', 'he', 'she', 'it'],
            'many': ['of', 'people', 'things', 'years'],
            'before': ['the', 'he', 'she', 'it', 'long'],
            'through': ['the', 'a', 'his', 'her', 'space'],
            'back': ['to', 'at', 'into', 'through', 'home'],
            'years': ['ago', 'later', 'of', 'have', 'passed'],
            'where': ['the', 'he', 'she', 'it', 'they'],
            'much': ['of', 'more', 'as', 'too', 'very'],
            'your': ['eyes', 'hand', 'face', 'voice', 'heart'],
            'well': ['as', 'known', 'documented', 'established'],
            'should': ['be', 'have', 'go', 'come', 'take'],
            'those': ['who', 'were', 'had', 'would', 'days'],
            'come': ['to', 'from', 'back', 'here', 'closer'],
            'will': ['be', 'have', 'go', 'come', 'take'],
            'little': ['bit', 'more', 'house', 'girl', 'boy'],
            'has': ['been', 'always', 'never', 'just'],
            'might': ['be', 'have', 'go', 'come', 'seem'],
            'still': ['the', 'he', 'she', 'it', 'was'],
            'good': ['and', 'for', 'at', 'enough', 'morning'],
            'very': ['good', 'well', 'much', 'little', 'important'],
            'great': ['and', 'big', 'power', 'beauty', 'mystery']
        };
        
        // Get DOM elements
        const inputPrompt = document.getElementById('input-prompt');
        const temperatureSlider = document.getElementById('temperature-slider');
        const temperatureValue = document.getElementById('temperature-value');
        const generateBtn = document.getElementById('generate-btn');
        const nextTokenBtn = document.getElementById('next-token-btn');
        const autoGenerateBtn = document.getElementById('auto-generate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const generatedDisplay = document.getElementById('generated-display');
        const contextDisplay = document.getElementById('context-display');
        const predictionContainer = document.getElementById('prediction-container');
        
        // Helper function to get last word from text
        function getLastWord(text) {
            const words = text.trim().split(/\s+/);
            return words[words.length - 1].toLowerCase().replace(/[.,!?;:]/g, '');
        }
        
        // Helper function to apply temperature to probabilities
        function applyTemperature(scores, temp) {
            const maxScore = Math.max(...scores);
            const expScores = scores.map(score => Math.exp((score - maxScore) / temp));
            const sumExp = expScores.reduce((a, b) => a + b, 0);
            return expScores.map(score => score / sumExp);
        }
        
        // Generate next token predictions
        function generateNextTokenPredictions(context) {
            const lastWord = getLastWord(context);
            let candidates = tokenContinuations[lastWord] || ['the', 'and', 'to', 'of', 'a'];
            
            // Add some randomness based on context
            if (context.includes('once upon a time')) {
                candidates = ['there', 'in', 'a', 'the', 'long'];
            } else if (context.includes('dark') || context.includes('night')) {
                candidates = ['shadows', 'moon', 'stars', 'silence', 'mystery'];
            } else if (context.includes('beautiful') || context.includes('bright')) {
                candidates = ['light', 'colors', 'sunshine', 'flowers', 'smile'];
            }
            
            // Ensure we have exactly 5 candidates
            while (candidates.length < 5) {
                const fallbacks = ['the', 'and', 'to', 'of', 'a', 'in', 'that', 'was', 'for', 'with'];
                const randomFallback = fallbacks[Math.floor(Math.random() * fallbacks.length)];
                if (!candidates.includes(randomFallback)) {
                    candidates.push(randomFallback);
                }
            }
            candidates = candidates.slice(0, 5);
            
            // Generate base scores and apply temperature
            const baseScores = [85, 70, 55, 40, 25].map(score => score + (Math.random() - 0.5) * 10);
            const probabilities = applyTemperature(baseScores, temperature);
            
            return candidates.map((token, index) => ({
                token: token,
                probability: (probabilities[index] * 100).toFixed(1)
            })).sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
        }
        
        // Select next token based on temperature
        function selectNextToken(predictions) {
            const probabilities = predictions.map(p => parseFloat(p.probability) / 100);
            const random = Math.random();
            
            let cumulative = 0;
            for (let i = 0; i < predictions.length; i++) {
                cumulative += probabilities[i];
                if (random <= cumulative) {
                    return predictions[i];
                }
            }
            return predictions[0]; // Fallback to most likely
        }
        
        // Update button states
        function updateButtonStates() {
            const hasText = inputPrompt.value.trim().length > 0;
            
            switch (currentState) {
                case 'initial':
                    generateBtn.disabled = !hasText;
                    nextTokenBtn.disabled = true;
                    autoGenerateBtn.disabled = true;
                    break;
                case 'generating':
                    generateBtn.disabled = true;
                    nextTokenBtn.disabled = false;
                    autoGenerateBtn.disabled = false;
                    break;
                case 'auto-generating':
                    generateBtn.disabled = true;
                    nextTokenBtn.disabled = true;
                    autoGenerateBtn.disabled = true;
                    break;
            }
        }
        
        // Start generation process
        function startGeneration() {
            currentPrompt = inputPrompt.value.trim();
            generatedTokens = [];
            
            // Update displays
            updateGeneratedDisplay();
            updateContextDisplay();
            
            currentState = 'generating';
            updateButtonStates();
            
            // Show initial predictions
            showNextTokenPredictions();
        }
        
        // Update generated text display
        function updateGeneratedDisplay() {
            const fullText = currentPrompt + ' ' + generatedTokens.join(' ');
            generatedDisplay.innerHTML = `<span class="prompt-text">${currentPrompt}</span>` +
                (generatedTokens.length > 0 ? ` <span class="generated-text">${generatedTokens.join(' ')}</span>` : '') +
                `<span class="cursor-blink">|</span>`;
        }
        
        // Update context display (last 20 words)
        function updateContextDisplay() {
            const fullText = currentPrompt + ' ' + generatedTokens.join(' ');
            const words = fullText.trim().split(/\s+/);
            const contextWindow = words.slice(-20).join(' ');
            
            contextDisplay.innerHTML = `<span class="text-[#f3f4f6]">${contextWindow}</span>`;
        }
        
        // Show next token predictions
        function showNextTokenPredictions() {
            const fullText = currentPrompt + ' ' + generatedTokens.join(' ');
            const predictions = generateNextTokenPredictions(fullText);
            
            let html = '';
            predictions.forEach((prediction, index) => {
                const isTop = index === 0;
                const itemClass = isTop ? 'token-item selected' : 'token-item';
                
                html += `
                    <div class="${itemClass}">
                        <span class="token-word">${prediction.token}</span>
                        <span class="token-score">${prediction.probability}%</span>
                    </div>
                `;
            });
            
            predictionContainer.innerHTML = html;
            predictionContainer.classList.add('fade-in');
        }
        
        // Generate next token
        function generateNextToken() {
            const fullText = currentPrompt + ' ' + generatedTokens.join(' ');
            const predictions = generateNextTokenPredictions(fullText);
            const selectedToken = selectNextToken(predictions);
            
            // Add token to sequence
            generatedTokens.push(selectedToken.token);
            
            // Update displays with animation
            updateGeneratedDisplay();
            updateContextDisplay();
            showNextTokenPredictions();
            
            // Stop if we've generated too many tokens
            if (generatedTokens.length >= 50) {
                stopAutoGeneration();
            }
        }
        
        // Start auto generation
        function startAutoGeneration() {
            currentState = 'auto-generating';
            updateButtonStates();
            
            let tokenCount = 0;
            autoGenerateInterval = setInterval(() => {
                generateNextToken();
                tokenCount++;
                
                if (tokenCount >= 5) {
                    stopAutoGeneration();
                }
            }, 1000);
        }
        
        // Stop auto generation
        function stopAutoGeneration() {
            if (autoGenerateInterval) {
                clearInterval(autoGenerateInterval);
                autoGenerateInterval = null;
            }
            
            currentState = 'generating';
            updateButtonStates();
        }
        
        // Reset interface
        function resetInterface() {
            stopAutoGeneration();
            
            currentPrompt = '';
            generatedTokens = [];
            currentState = 'initial';
            
            inputPrompt.value = '';
            
            generatedDisplay.innerHTML = '<span class="text-[#9ca3af]">Enter a prompt to begin generation...</span>';
            contextDisplay.innerHTML = '<span class="text-[#9ca3af]">Click "Start Generation" to see the context...</span>';
            predictionContainer.innerHTML = '<div class="text-[#9ca3af] text-center py-8">Generate tokens to see predictions...</div>';
            
            updateButtonStates();
        }
        
        // Event listeners
        inputPrompt.addEventListener('input', updateButtonStates);
        
        temperatureSlider.addEventListener('input', (e) => {
            temperature = parseFloat(e.target.value);
            temperatureValue.textContent = temperature.toFixed(1);
            
            // Update predictions if we're in generation mode
            if (currentState === 'generating') {
                showNextTokenPredictions();
            }
        });
        
        generateBtn.addEventListener('click', startGeneration);
        nextTokenBtn.addEventListener('click', generateNextToken);
        autoGenerateBtn.addEventListener('click', startAutoGeneration);
        resetBtn.addEventListener('click', resetInterface);
        
        // Keyboard shortcuts
        inputPrompt.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!generateBtn.disabled) {
                    startGeneration();
                }
            }
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateButtonStates();
        });
    </script>
</body>
</html>
