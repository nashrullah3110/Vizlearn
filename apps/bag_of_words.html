<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Bag of Words (BoW) Explainer</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Custom theme configuration */
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a78bfa;
        }
        
        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-border {
            animation: pulseBorder 2s infinite;
        }
        
        @keyframes pulseBorder {
            0%, 100% { border-color: #374151; }
            50% { border-color: #8b5cf6; }
        }
        
        /* Custom button styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #a78bfa, #c4b5fd);
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }
        
        .btn-secondary {
            background: #374151;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-1px);
        }
        
        /* Word tag styles */
        .word-tag {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            color: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            margin: 0.25rem;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .word-tag:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }
        
        /* Vector display styles */
        .vector-item {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .vector-item:hover {
            border-color: #8b5cf6;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.2);
        }
        
        /* Textarea focus styles */
        .custom-textarea:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid #374151;
            border-top: 3px solid #8b5cf6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] flex flex-col min-h-screen">
    <!-- Header -->
    <header class="py-6 px-4 text-center border-b border-[#374151]">
        <h1 class="text-3xl md:text-4xl font-bold text-[#f3f4f6]">
            Interactive Bag of Words (BoW) Explainer
        </h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col lg:flex-row gap-6 p-6">
        <!-- Left Panel: Input & Control -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col">
                <!-- Explanation Section -->
                <div class="mb-6">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-info-circle text-[#8b5cf6] mr-2"></i>
                        What is Bag of Words?
                    </h2>
                    <p class="text-[#9ca3af] text-sm leading-relaxed">
                        The Bag of Words (BoW) model is a fundamental text representation technique in NLP. 
                        It converts text documents into numerical vectors by counting word frequencies, 
                        ignoring grammar and word order. Each document becomes a vector where each dimension 
                        represents a unique word from the vocabulary.
                    </p>
                </div>

                <!-- Input Section -->
                <div class="flex-grow flex flex-col">
                    <label for="textInput" class="text-sm font-medium text-[#f3f4f6] mb-2">
                        <i class="fas fa-edit text-[#8b5cf6] mr-2"></i>
                        Input Documents (one per line):
                    </label>
                    <textarea 
                        id="textInput" 
                        class="custom-textarea flex-grow bg-[#101827] border border-[#374151] rounded-lg p-4 text-[#f3f4f6] text-sm resize-none transition-all duration-300"
                        placeholder="Enter your documents here, one per line..."
                        rows="8"
                    >The cat sat on the mat
The dog ran in the park
A cat and a dog are pets</textarea>

                    <!-- Control Buttons -->
                    <div class="flex gap-3 mt-4">
                        <button 
                            id="processBtn" 
                            class="btn-primary flex-1 py-3 px-4 rounded-lg font-medium text-white flex items-center justify-center"
                        >
                            <i class="fas fa-cogs mr-2"></i>
                            Process Text
                        </button>
                        <button 
                            id="resetBtn" 
                            class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center"
                        >
                            <i class="fas fa-undo mr-2"></i>
                            Reset
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel: Visualization -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col">
                <!-- Vocabulary Section -->
                <div class="mb-6">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-book text-[#8b5cf6] mr-2"></i>
                        Generated Vocabulary
                        <span id="vocabCount" class="text-sm text-[#9ca3af] ml-2">(0 words)</span>
                    </h2>
                    <div id="vocabularyDisplay" class="min-h-[100px] bg-[#101827] border border-[#374151] rounded-lg p-4">
                        <p class="text-[#9ca3af] text-sm italic">Click "Process Text" to generate vocabulary...</p>
                    </div>
                </div>

                <!-- Vector Representation Section -->
                <div class="flex-grow flex flex-col">
                    <h2 class="text-xl font-semibold mb-3 text-[#f3f4f6]">
                        <i class="fas fa-vector-square text-[#8b5cf6] mr-2"></i>
                        Vector Representation
                    </h2>
                    <div id="vectorDisplay" class="flex-grow bg-[#101827] border border-[#374151] rounded-lg p-4 overflow-y-auto">
                        <p class="text-[#9ca3af] text-sm italic">Process documents to see their vector representations...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] py-6">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Global variables
        let vocabulary = [];
        let documentVectors = [];
        let originalText = '';

        // DOM elements
        const textInput = document.getElementById('textInput');
        const processBtn = document.getElementById('processBtn');
        const resetBtn = document.getElementById('resetBtn');
        const vocabularyDisplay = document.getElementById('vocabularyDisplay');
        const vectorDisplay = document.getElementById('vectorDisplay');
        const vocabCount = document.getElementById('vocabCount');

        // Store original text on load
        document.addEventListener('DOMContentLoaded', function() {
            originalText = textInput.value;
        });

        // Text preprocessing function
        function preprocessText(text) {
            return text.toLowerCase()
                      .replace(/[^\w\s]/g, '') // Remove punctuation
                      .split(/\s+/)           // Split by whitespace
                      .filter(word => word.length > 0); // Remove empty strings
        }

        // Build vocabulary from all documents
        function buildVocabulary(documents) {
            const vocabSet = new Set();
            documents.forEach(doc => {
                const words = preprocessText(doc);
                words.forEach(word => vocabSet.add(word));
            });
            return Array.from(vocabSet).sort();
        }

        // Create vector representation for a document
        function createVector(document, vocabulary) {
            const words = preprocessText(document);
            const wordCount = {};
            
            // Count word frequencies
            words.forEach(word => {
                wordCount[word] = (wordCount[word] || 0) + 1;
            });
            
            // Create vector based on vocabulary
            return vocabulary.map(word => wordCount[word] || 0);
        }

        // Display vocabulary as tags
        function displayVocabulary(vocab) {
            vocabularyDisplay.innerHTML = '';
            vocabCount.textContent = `(${vocab.length} words)`;
            
            if (vocab.length === 0) {
                vocabularyDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">No vocabulary generated</p>';
                return;
            }
            
            vocab.forEach((word, index) => {
                const tag = document.createElement('span');
                tag.className = 'word-tag fade-in';
                tag.textContent = `${index + 1}. ${word}`;
                tag.style.animationDelay = `${index * 0.1}s`;
                vocabularyDisplay.appendChild(tag);
            });
        }

        // Display vector representations
        function displayVectors(documents, vectors, vocab) {
            vectorDisplay.innerHTML = '';
            
            if (vectors.length === 0) {
                vectorDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">No vectors generated</p>';
                return;
            }
            
            documents.forEach((doc, docIndex) => {
                const vectorItem = document.createElement('div');
                vectorItem.className = 'vector-item fade-in';
                vectorItem.style.animationDelay = `${docIndex * 0.2}s`;
                
                // Document text
                const docText = document.createElement('div');
                docText.className = 'mb-3';
                docText.innerHTML = `
                    <h3 class="text-sm font-semibold text-[#8b5cf6] mb-1">
                        <i class="fas fa-file-text mr-1"></i>
                        Document ${docIndex + 1}:
                    </h3>
                    <p class="text-[#f3f4f6] text-sm italic">"${doc}"</p>
                `;
                
                // Vector representation
                const vectorText = document.createElement('div');
                const vector = vectors[docIndex];
                const vectorStr = '[' + vector.join(', ') + ']';
                
                vectorText.innerHTML = `
                    <h4 class="text-sm font-semibold text-[#a78bfa] mb-2">
                        <i class="fas fa-calculator mr-1"></i>
                        Vector (${vector.length}D):
                    </h4>
                    <div class="bg-[#101827] p-3 rounded border border-[#374151] font-mono text-xs text-[#f3f4f6] overflow-x-auto">
                        ${vectorStr}
                    </div>
                `;
                
                // Word count breakdown
                const nonZeroIndices = vector.map((count, index) => ({ word: vocab[index], count, index }))
                                            .filter(item => item.count > 0);
                
                if (nonZeroIndices.length > 0) {
                    const breakdownText = document.createElement('div');
                    breakdownText.className = 'mt-3';
                    breakdownText.innerHTML = `
                        <h4 class="text-sm font-semibold text-[#9ca3af] mb-2">
                            <i class="fas fa-chart-bar mr-1"></i>
                            Word Frequencies:
                        </h4>
                        <div class="flex flex-wrap gap-1">
                            ${nonZeroIndices.map(item => 
                                `<span class="bg-[#8b5cf6] text-white px-2 py-1 rounded text-xs">
                                    ${item.word}: ${item.count}
                                </span>`
                            ).join('')}
                        </div>
                    `;
                    vectorText.appendChild(breakdownText);
                }
                
                vectorItem.appendChild(docText);
                vectorItem.appendChild(vectorText);
                vectorDisplay.appendChild(vectorItem);
            });
        }

        // Process text function
        function processText() {
            const inputText = textInput.value.trim();
            
            if (!inputText) {
                alert('Please enter some text to process.');
                return;
            }
            
            // Show loading state
            processBtn.innerHTML = '<div class="spinner mr-2"></div>Processing...';
            processBtn.disabled = true;
            
            // Simulate processing delay for better UX
            setTimeout(() => {
                try {
                    // Split input into documents (by lines)
                    const documents = inputText.split('\n')
                                              .map(line => line.trim())
                                              .filter(line => line.length > 0);
                    
                    if (documents.length === 0) {
                        throw new Error('No valid documents found.');
                    }
                    
                    // Build vocabulary and create vectors
                    vocabulary = buildVocabulary(documents);
                    documentVectors = documents.map(doc => createVector(doc, vocabulary));
                    
                    // Display results
                    displayVocabulary(vocabulary);
                    displayVectors(documents, documentVectors, vocabulary);
                    
                    // Add success visual feedback
                    vocabularyDisplay.classList.add('pulse-border');
                    vectorDisplay.classList.add('pulse-border');
                    
                    setTimeout(() => {
                        vocabularyDisplay.classList.remove('pulse-border');
                        vectorDisplay.classList.remove('pulse-border');
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error processing text:', error);
                    alert('Error processing text: ' + error.message);
                } finally {
                    // Restore button state
                    processBtn.innerHTML = '<i class="fas fa-cogs mr-2"></i>Process Text';
                    processBtn.disabled = false;
                }
            }, 800);
        }

        // Reset function
        function resetApplication() {
            textInput.value = originalText;
            vocabulary = [];
            documentVectors = [];
            
            vocabularyDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">Click "Process Text" to generate vocabulary...</p>';
            vectorDisplay.innerHTML = '<p class="text-[#9ca3af] text-sm italic">Process documents to see their vector representations...</p>';
            vocabCount.textContent = '(0 words)';
            
            // Visual feedback
            textInput.focus();
        }

        // Event listeners
        processBtn.addEventListener('click', processText);
        resetBtn.addEventListener('click', resetApplication);
        
        // Allow Enter key to process (with Ctrl/Cmd modifier to avoid interfering with line breaks)
        textInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {
                event.preventDefault();
                processText();
            }
        });

        // Auto-resize textarea
        textInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 300) + 'px';
        });

        // Process initial example on load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                processText();
            }, 500);
        });
    </script>
</body>
</html>
