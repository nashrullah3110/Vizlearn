<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masked Language Modeling Interactive</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        .panel {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .input-textarea {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            border-radius: 8px;
            padding: 12px;
            width: 100%;
            min-height: 120px;
            resize: none;
            font-family: 'Roboto Mono', monospace;
            transition: border-color 0.3s ease;
        }
        
        .input-textarea:focus {
            outline: none;
            border-color: #8b5cf6;
        }
        
        .input-textarea::placeholder {
            color: #9ca3af;
        }
        
        .btn-primary {
            background: transparent;
            color: #f3f4f6;
            border: 2px solid #374151;
            padding: 12px 20px;
            border-radius: 8px;
            font-family: 'Roboto Mono', monospace;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #a78bfa;
            border-color: #a78bfa;
            color: white;
        }
        
        .btn-primary.active {
            background: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        .btn-primary:disabled {
            color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .sentence-display {
            background: #374151;
            border-radius: 8px;
            padding: 16px;
            color: #f3f4f6;
            font-family: 'Roboto Mono', monospace;
            line-height: 1.6;
            min-height: 60px;
            display: flex;
            align-items: center;
        }
        
        .mask-token {
            background: #8b5cf6;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        
        .prediction-list {
            background: #374151;
            border-radius: 8px;
            padding: 16px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .prediction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #4b5563;
        }
        
        .prediction-item:last-child {
            border-bottom: none;
        }
        
        .prediction-item.top-prediction {
            background: rgba(139, 92, 246, 0.2);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid #8b5cf6;
        }
        
        .prediction-word {
            font-weight: 500;
            color: #f3f4f6;
        }
        
        .prediction-item.top-prediction .prediction-word {
            color: #8b5cf6;
            font-weight: bold;
        }
        
        .prediction-score {
            color: #9ca3af;
            font-size: 12px;
        }
        
        .prediction-item.top-prediction .prediction-score {
            color: #a78bfa;
        }
        
        .section-label {
            font-size: 14px;
            font-weight: 600;
            color: #f3f4f6;
            margin-bottom: 12px;
            display: block;
        }
        
        .section-description {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 16px;
        }
        
        .social-icon {
            color: #9ca3af;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            color: #a78bfa;
            transform: translateY(-2px);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 1023px) {
            .main-content {
                flex-direction: column !important;
            }
            
            .panel {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] min-h-screen flex flex-col">
    
    <!-- Header -->
    <header class="border-b border-[#374151] p-6">
        <h1 class="text-2xl font-bold text-center">Masked Language Modeling</h1>
    </header>
    
    <!-- Main Content -->
    <main class="flex-1 flex main-content p-6 gap-6">
        
        <!-- Input & Controls Panel (Left) -->
        <div class="panel w-full lg:w-1/2">
            <div class="space-y-6">
                <!-- Input Sentence Section -->
                <div>
                    <label class="section-label">1. Enter Your Sentence</label>
                    <p class="section-description">
                        Type any sentence you'd like to experiment with. The model will mask a random word and predict what it should be.
                    </p>
                    <textarea 
                        id="input-sentence" 
                        class="input-textarea" 
                        placeholder="The quick brown fox jumps over the lazy dog."
                    ></textarea>
                </div>
                
                <!-- Control Buttons Section -->
                <div>
                    <label class="section-label">2. Controls</label>
                    <div class="space-y-3">
                        <button id="mask-btn" class="btn-primary w-full" disabled>
                            <i class="fas fa-eye-slash mr-2"></i>Mask Random Word
                        </button>
                        <button id="predict-btn" class="btn-primary w-full" disabled>
                            <i class="fas fa-brain mr-2"></i>Predict Masked Token
                        </button>
                        <button id="reset-btn" class="btn-primary w-full">
                            <i class="fas fa-undo mr-2"></i>Reset
                        </button>
                    </div>
                </div>
                
                <!-- Process Explanation -->
                <div class="bg-[#8b5cf6] bg-opacity-10 border border-[#8b5cf6] border-opacity-30 rounded-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-[#8b5cf6]">How MLM Works:</h3>
                    <div class="text-xs text-[#9ca3af] space-y-1">
                        <div>1. Input a complete sentence</div>
                        <div>2. Randomly mask one word with [MASK]</div>
                        <div>3. Model predicts the masked word using context</div>
                        <div>4. View ranked predictions with confidence scores</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Visualization Panel (Right) -->
        <div class="panel w-full lg:w-1/2">
            <div class="space-y-6">
                <!-- Original Sentence Display -->
                <div>
                    <label class="section-label">Original Sentence</label>
                    <div id="original-display" class="sentence-display text-[#9ca3af]">
                        Enter a sentence to begin...
                    </div>
                </div>
                
                <!-- Masked Sentence Display -->
                <div>
                    <label class="section-label">Masked Input</label>
                    <div id="masked-display" class="sentence-display text-[#9ca3af]">
                        Click "Mask Random Word" to see the masked version...
                    </div>
                </div>
                
                <!-- Prediction Output -->
                <div>
                    <label class="section-label">Model Prediction for <span id="mask-label">[MASK]</span></label>
                    <div id="prediction-container" class="prediction-list">
                        <div class="text-[#9ca3af] text-center py-8">
                            Click "Predict Masked Token" to see model predictions...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </main>
    
    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] p-6 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" aria-label="LinkedIn" class="social-icon">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" aria-label="GitHub" class="social-icon">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" aria-label="Kaggle" class="social-icon">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" aria-label="Hugging Face" class="social-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v-.07zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" aria-label="Instagram" class="social-icon">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>
    
    <script>
        // Application state
        let currentSentence = '';
        let maskedSentence = '';
        let maskedWord = '';
        let maskedIndex = -1;
        let currentState = 'initial'; // 'initial', 'masked', 'predicted'
        
        // Predefined word alternatives for realistic predictions
        const wordAlternatives = {
            'the': ['a', 'this', 'that', 'each', 'every'],
            'quick': ['fast', 'rapid', 'swift', 'speedy', 'agile'],
            'brown': ['black', 'white', 'red', 'dark', 'golden'],
            'fox': ['dog', 'cat', 'wolf', 'animal', 'creature'],
            'jumps': ['leaps', 'bounds', 'hops', 'runs', 'moves'],
            'over': ['across', 'above', 'through', 'around', 'past'],
            'lazy': ['sleeping', 'tired', 'resting', 'old', 'slow'],
            'dog': ['cat', 'fox', 'animal', 'puppy', 'hound'],
            'is': ['was', 'are', 'seems', 'appears', 'looks'],
            'and': ['or', 'but', 'then', 'plus', 'with'],
            'in': ['on', 'at', 'within', 'inside', 'under'],
            'to': ['for', 'towards', 'into', 'until', 'from'],
            'a': ['the', 'one', 'some', 'any', 'each'],
            'of': ['from', 'about', 'with', 'for', 'by'],
            'it': ['this', 'that', 'he', 'she', 'they'],
            'be': ['is', 'was', 'are', 'were', 'being'],
            'have': ['has', 'had', 'having', 'get', 'possess'],
            'will': ['would', 'can', 'could', 'should', 'might'],
            'good': ['great', 'excellent', 'fine', 'nice', 'wonderful'],
            'new': ['fresh', 'recent', 'modern', 'latest', 'current'],
            'first': ['last', 'next', 'second', 'initial', 'primary'],
            'way': ['method', 'path', 'route', 'approach', 'manner'],
            'work': ['job', 'task', 'effort', 'labor', 'activity'],
            'day': ['night', 'week', 'time', 'moment', 'period'],
            'time': ['moment', 'period', 'hour', 'minute', 'second'],
            'man': ['person', 'guy', 'individual', 'human', 'boy'],
            'woman': ['lady', 'girl', 'person', 'individual', 'female'],
            'house': ['home', 'building', 'residence', 'place', 'structure'],
            'car': ['vehicle', 'automobile', 'truck', 'bike', 'bus'],
            'water': ['liquid', 'fluid', 'drink', 'beverage', 'juice'],
            'food': ['meal', 'dish', 'snack', 'nutrition', 'cuisine']
        };
        
        // Get DOM elements
        const inputSentence = document.getElementById('input-sentence');
        const maskBtn = document.getElementById('mask-btn');
        const predictBtn = document.getElementById('predict-btn');
        const resetBtn = document.getElementById('reset-btn');
        const originalDisplay = document.getElementById('original-display');
        const maskedDisplay = document.getElementById('masked-display');
        const predictionContainer = document.getElementById('prediction-container');
        const maskLabel = document.getElementById('mask-label');
        
        // Helper function to clean and split sentence into words
        function tokenizeSentence(sentence) {
            return sentence.trim().split(/\s+/).filter(word => word.length > 0);
        }
        
        // Helper function to generate predictions for a masked word
        function generatePredictions(originalWord) {
            const lowerWord = originalWord.toLowerCase();
            let alternatives = wordAlternatives[lowerWord] || ['word', 'text', 'item', 'thing', 'element'];
            
            // Always include the original word as the top prediction
            const predictions = [originalWord, ...alternatives.slice(0, 4)];
            
            // Generate mock confidence scores (decreasing from top to bottom)
            return predictions.map((word, index) => ({
                word: word,
                confidence: (95 - index * 8 - Math.random() * 5).toFixed(1)
            }));
        }
        
        // Update button states based on current application state
        function updateButtonStates() {
            const hasText = inputSentence.value.trim().length > 0;
            
            switch (currentState) {
                case 'initial':
                    maskBtn.disabled = !hasText;
                    predictBtn.disabled = true;
                    break;
                case 'masked':
                    maskBtn.disabled = true;
                    predictBtn.disabled = false;
                    break;
                case 'predicted':
                    maskBtn.disabled = true;
                    predictBtn.disabled = true;
                    break;
            }
        }
        
        // Mask a random word in the sentence
        function maskRandomWord() {
            currentSentence = inputSentence.value.trim();
            const words = tokenizeSentence(currentSentence);
            
            if (words.length === 0) return;
            
            // Select a random word (avoid very short words for better demo)
            const eligibleIndices = words.map((word, index) => 
                word.length > 2 ? index : -1
            ).filter(index => index !== -1);
            
            maskedIndex = eligibleIndices.length > 0 
                ? eligibleIndices[Math.floor(Math.random() * eligibleIndices.length)]
                : Math.floor(Math.random() * words.length);
            
            maskedWord = words[maskedIndex];
            
            // Create masked version
            const maskedWords = [...words];
            maskedWords[maskedIndex] = '[MASK]';
            maskedSentence = maskedWords.join(' ');
            
            // Update displays
            originalDisplay.textContent = currentSentence;
            maskedDisplay.innerHTML = maskedSentence.replace('[MASK]', '<span class="mask-token">[MASK]</span>');
            
            // Add fade-in animation
            originalDisplay.classList.add('fade-in');
            maskedDisplay.classList.add('fade-in');
            
            currentState = 'masked';
            updateButtonStates();
        }
        
        // Generate and display predictions
        function predictMaskedToken() {
            const predictions = generatePredictions(maskedWord);
            
            // Update mask label
            maskLabel.innerHTML = '<span class="mask-token">[MASK]</span>';
            
            // Create prediction list HTML
            let html = '';
            predictions.forEach((prediction, index) => {
                const isTop = index === 0;
                const itemClass = isTop ? 'prediction-item top-prediction' : 'prediction-item';
                
                html += `
                    <div class="${itemClass}">
                        <span class="prediction-word">${prediction.word}</span>
                        <span class="prediction-score">${prediction.confidence}%</span>
                    </div>
                `;
            });
            
            predictionContainer.innerHTML = html;
            predictionContainer.classList.add('fade-in');
            
            currentState = 'predicted';
            updateButtonStates();
        }
        
        // Reset the entire interface
        function resetInterface() {
            currentSentence = '';
            maskedSentence = '';
            maskedWord = '';
            maskedIndex = -1;
            currentState = 'initial';
            
            // Clear input
            inputSentence.value = '';
            
            // Reset displays
            originalDisplay.textContent = 'Enter a sentence to begin...';
            originalDisplay.className = 'sentence-display text-[#9ca3af]';
            
            maskedDisplay.textContent = 'Click "Mask Random Word" to see the masked version...';
            maskedDisplay.className = 'sentence-display text-[#9ca3af]';
            
            predictionContainer.innerHTML = `
                <div class="text-[#9ca3af] text-center py-8">
                    Click "Predict Masked Token" to see model predictions...
                </div>
            `;
            predictionContainer.className = 'prediction-list';
            
            maskLabel.textContent = '[MASK]';
            
            updateButtonStates();
        }
        
        // Event listeners
        inputSentence.addEventListener('input', () => {
            updateButtonStates();
        });
        
        inputSentence.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!maskBtn.disabled) {
                    maskRandomWord();
                }
            }
        });
        
        maskBtn.addEventListener('click', maskRandomWord);
        predictBtn.addEventListener('click', predictMaskedToken);
        resetBtn.addEventListener('click', resetInterface);
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            updateButtonStates();
        });
    </script>
</body>
</html>
