<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Parsing & Formatting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-main: #101827;
            --bg-panel: #1f2937;
            --accent: #8b5cf6;
            --accent-light: #a78bfa;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --border: #374151;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            background-color: var(--bg-main);
            color: var(--text-primary);
        }

        .date-input {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .date-input:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .result-card {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .result-card.success {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.05);
        }

        .result-card.error {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.05);
        }

        .format-token {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.25rem 0.5rem;
            margin: 0.125rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .format-token:hover {
            background: var(--accent-light);
        }

        .validation-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-left: 8px;
        }

        .validation-indicator.valid {
            background-color: #10b981;
        }

        .validation-indicator.invalid {
            background-color: #ef4444;
        }

        .validation-indicator.unknown {
            background-color: #6b7280;
        }

        .btn {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: var(--accent);
            border-color: var(--accent-light);
        }

        .btn-primary {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-light);
        }

        .quick-date {
            background: var(--bg-main);
            border: 1px solid var(--border);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .quick-date:hover {
            border-color: var(--accent);
            background: rgba(139, 92, 246, 0.1);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-[#101827] text-[#f3f4f6]">
    <!-- Header -->
    <header class="bg-[#1f2937] border-b border-[#374151] p-4">
        <h1 class="text-2xl font-bold text-center">Date Parsing & Formatting</h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col lg:flex-row gap-4 p-4">
        <!-- Left Panel - Input & Controls -->
        <div class="lg:w-1/3 bg-[#1f2937] border border-[#374151] rounded-lg p-4 space-y-6">
            <!-- Date Input -->
            <div>
                <h3 class="text-lg font-semibold mb-3">Date Input</h3>
                <div class="relative">
                    <input type="text" id="dateInput" class="date-input w-full p-3 rounded" placeholder="Enter date (e.g., 2024-01-15, Jan 15 2024)">
                    <div class="validation-indicator unknown" id="inputValidation"></div>
                </div>
                <div class="text-xs text-[#9ca3af] mt-2">
                    Try: "2024-01-15", "Jan 15, 2024", "15/01/2024", "today", "tomorrow"
                </div>
            </div>

            <!-- Quick Dates -->
            <div>
                <h3 class="text-lg font-semibold mb-3">Quick Dates</h3>
                <div class="grid grid-cols-2 gap-2">
                    <button id="todayBtn" class="quick-date p-2 rounded text-sm">
                        <i class="fas fa-calendar-day mr-1"></i>Today
                    </button>
                    <button id="tomorrowBtn" class="quick-date p-2 rounded text-sm">
                        <i class="fas fa-arrow-right mr-1"></i>Tomorrow
                    </button>
                    <button id="yesterdayBtn" class="quick-date p-2 rounded text-sm">
                        <i class="fas fa-arrow-left mr-1"></i>Yesterday
                    </button>
                    <button id="weekAgoBtn" class="quick-date p-2 rounded text-sm">
                        <i class="fas fa-calendar-minus mr-1"></i>Week Ago
                    </button>
                </div>
            </div>

            <!-- Custom Format -->
            <div>
                <h3 class="text-lg font-semibold mb-3">Custom Format</h3>
                <input type="text" id="customFormat" class="date-input w-full p-2 rounded text-sm" placeholder="e.g., YYYY-MM-DD HH:mm:ss">
                <div class="mt-2">
                    <div class="text-xs text-[#9ca3af] mb-2">Click tokens to add:</div>
                    <div class="space-y-1">
                        <div>
                            <span class="format-token" onclick="addToken('YYYY')">YYYY</span>
                            <span class="format-token" onclick="addToken('MM')">MM</span>
                            <span class="format-token" onclick="addToken('DD')">DD</span>
                            <span class="format-token" onclick="addToken('HH')">HH</span>
                            <span class="format-token" onclick="addToken('mm')">mm</span>
                        </div>
                        <div>
                            <span class="format-token" onclick="addToken('MMM')">MMM</span>
                            <span class="format-token" onclick="addToken('MMMM')">MMMM</span>
                            <span class="format-token" onclick="addToken('dddd')">dddd</span>
                            <span class="format-token" onclick="addToken('A')">A</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div>
                <h3 class="text-lg font-semibold mb-3">Actions</h3>
                <div class="space-y-2">
                    <button id="parseBtn" class="btn-primary w-full p-2 rounded">
                        <i class="fas fa-play mr-2"></i>Parse & Format
                    </button>
                    <button id="validateBtn" class="btn w-full p-2 rounded">
                        <i class="fas fa-check mr-2"></i>Validate
                    </button>
                </div>
            </div>

            <!-- Date Info -->
            <div>
                <h3 class="text-lg font-semibold mb-3">Date Info</h3>
                <div class="space-y-2">
                    <div class="result-card p-3 rounded">
                        <div class="text-sm font-medium text-[#9ca3af]">Parsed Date</div>
                        <div id="parsedInfo" class="text-sm">No date parsed</div>
                    </div>
                    <div class="result-card p-3 rounded">
                        <div class="text-sm font-medium text-[#9ca3af]">Timestamp</div>
                        <div id="timestampInfo" class="text-sm">-</div>
                    </div>
                    <div class="result-card p-3 rounded">
                        <div class="text-sm font-medium text-[#9ca3af]">Relative</div>
                        <div id="relativeTime" class="text-sm">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Format Results -->
        <div class="lg:w-2/3 bg-[#1f2937] border border-[#374151] rounded-lg p-4">
            <h3 class="text-lg font-semibold mb-4">Format Results</h3>
            
            <!-- Standard Formats -->
            <div class="space-y-4 mb-6">
                <div class="result-card p-4 rounded">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-medium text-sm">ISO 8601</h4>
                        <button class="text-xs text-[#8b5cf6] hover:text-[#a78bfa]" onclick="copyToClipboard('iso8601Result')">Copy</button>
                    </div>
                    <div class="bg-[#101827] border border-[#374151] rounded p-3 font-mono text-sm" id="iso8601Result">YYYY-MM-DDTHH:mm:ss.sssZ</div>
                </div>

                <div class="result-card p-4 rounded">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-medium text-sm">US Format</h4>
                        <button class="text-xs text-[#8b5cf6] hover:text-[#a78bfa]" onclick="copyToClipboard('usFormatResult')">Copy</button>
                    </div>
                    <div class="bg-[#101827] border border-[#374151] rounded p-3 font-mono text-sm" id="usFormatResult">MM/DD/YYYY</div>
                </div>

                <div class="result-card p-4 rounded">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-medium text-sm">European Format</h4>
                        <button class="text-xs text-[#8b5cf6] hover:text-[#a78bfa]" onclick="copyToClipboard('euFormatResult')">Copy</button>
                    </div>
                    <div class="bg-[#101827] border border-[#374151] rounded p-3 font-mono text-sm" id="euFormatResult">DD/MM/YYYY</div>
                </div>

                <div class="result-card p-4 rounded">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-medium text-sm">Long Format</h4>
                        <button class="text-xs text-[#8b5cf6] hover:text-[#a78bfa]" onclick="copyToClipboard('longFormatResult')">Copy</button>
                    </div>
                    <div class="bg-[#101827] border border-[#374151] rounded p-3 font-mono text-sm" id="longFormatResult">dddd, MMMM DD, YYYY</div>
                </div>
            </div>

            <!-- Custom Format Result -->
            <div class="result-card p-4 rounded">
                <div class="flex items-center justify-between mb-2">
                    <h4 class="font-medium text-sm">Custom Format</h4>
                    <button class="text-xs text-[#8b5cf6] hover:text-[#a78bfa]" onclick="copyToClipboard('customResult')">Copy</button>
                </div>
                <div class="bg-[#101827] border border-[#374151] rounded p-3 font-mono text-lg" id="customResult">Enter a custom format pattern...</div>
            </div>

            <!-- Parsing Status -->
            <div class="mt-6">
                <h4 class="font-medium text-sm mb-2">Parsing Status</h4>
                <div id="parsingStatus" class="result-card p-3 rounded">
                    <div class="text-sm text-[#9ca3af]">Enter a date to see parsing information</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] p-4 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Application state
        let currentDate = new Date();

        // DOM elements
        const dateInput = document.getElementById('dateInput');
        const customFormat = document.getElementById('customFormat');
        const parsedInfo = document.getElementById('parsedInfo');
        const timestampInfo = document.getElementById('timestampInfo');
        const relativeTime = document.getElementById('relativeTime');
        const inputValidation = document.getElementById('inputValidation');
        const parsingStatus = document.getElementById('parsingStatus');

        // Format result elements
        const iso8601Result = document.getElementById('iso8601Result');
        const usFormatResult = document.getElementById('usFormatResult');
        const euFormatResult = document.getElementById('euFormatResult');
        const longFormatResult = document.getElementById('longFormatResult');
        const customResult = document.getElementById('customResult');

        // Initialize application
        function init() {
            setupEventListeners();
            parseAndFormat();
        }

        // Setup event listeners
        function setupEventListeners() {
            dateInput.addEventListener('input', parseAndFormat);
            customFormat.addEventListener('input', parseAndFormat);

            // Quick date buttons
            document.getElementById('todayBtn').addEventListener('click', () => setQuickDate('today'));
            document.getElementById('tomorrowBtn').addEventListener('click', () => setQuickDate('tomorrow'));
            document.getElementById('yesterdayBtn').addEventListener('click', () => setQuickDate('yesterday'));
            document.getElementById('weekAgoBtn').addEventListener('click', () => setQuickDate('weekAgo'));

            // Control buttons
            document.getElementById('parseBtn').addEventListener('click', parseAndFormat);
            document.getElementById('validateBtn').addEventListener('click', validateDate);
        }

        // Set quick dates
        function setQuickDate(type) {
            const now = new Date();
            let targetDate;

            switch (type) {
                case 'today':
                    targetDate = now;
                    break;
                case 'tomorrow':
                    targetDate = new Date(now.getTime() + 24 * 60 * 60 * 1000);
                    break;
                case 'yesterday':
                    targetDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);
                    break;
                case 'weekAgo':
                    targetDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    break;
                default:
                    targetDate = now;
            }

            dateInput.value = targetDate.toISOString().split('T')[0];
            currentDate = targetDate;
            parseAndFormat();
        }

        // Parse and format date
        function parseAndFormat() {
            const inputValue = dateInput.value.trim();
            
            if (!inputValue) {
                clearResults();
                return;
            }

            try {
                let parsedDate = parseDate(inputValue);
                
                if (parsedDate && !isNaN(parsedDate.getTime())) {
                    currentDate = parsedDate;
                    updateValidationStatus(true);
                    updateDateInfo();
                    updateFormatResults();
                    updateParsingStatus(inputValue, parsedDate);
                } else {
                    updateValidationStatus(false);
                    clearResults();
                }
            } catch (error) {
                updateValidationStatus(false);
                clearResults();
            }
        }

        // Smart date parsing function
        function parseDate(input) {
            // Try standard Date constructor
            let date = new Date(input);
            if (!isNaN(date.getTime())) {
                return date;
            }

            // Try common formats
            const formatPatterns = [
                { regex: /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/, order: ['month', 'day', 'year'] },
                { regex: /^(\d{1,2})\/(\d{1,2})\/(\d{2})$/, order: ['month', 'day', 'year'] },
                { regex: /^(\d{1,2})-(\d{1,2})-(\d{4})$/, order: ['month', 'day', 'year'] },
                { regex: /^(\d{4})\/(\d{1,2})\/(\d{1,2})$/, order: ['year', 'month', 'day'] }
            ];

            for (let pattern of formatPatterns) {
                const match = input.match(pattern.regex);
                if (match) {
                    const parts = {};
                    pattern.order.forEach((part, index) => {
                        parts[part] = parseInt(match[index + 1]);
                    });

                    if (parts.year < 100) {
                        parts.year += parts.year > 50 ? 1900 : 2000;
                    }

                    date = new Date(parts.year, parts.month - 1, parts.day);
                    if (!isNaN(date.getTime())) return date;
                }
            }

            // Relative dates
            const now = new Date();
            const relativePatterns = {
                'today': () => new Date(),
                'tomorrow': () => new Date(now.getTime() + 24 * 60 * 60 * 1000),
                'yesterday': () => new Date(now.getTime() - 24 * 60 * 60 * 1000),
                'next week': () => new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000),
                'last week': () => new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)
            };

            const lowerInput = input.toLowerCase();
            if (relativePatterns[lowerInput]) {
                return relativePatterns[lowerInput]();
            }

            return null;
        }

        // Update validation status
        function updateValidationStatus(isValid) {
            inputValidation.className = `validation-indicator ${isValid ? 'valid' : 'invalid'}`;
        }

        // Update date information
        function updateDateInfo() {
            if (!currentDate) return;

            parsedInfo.textContent = currentDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            timestampInfo.textContent = Math.floor(currentDate.getTime() / 1000);
            
            // Calculate relative time
            const now = new Date();
            const diffMs = currentDate.getTime() - now.getTime();
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                relativeTime.textContent = 'Today';
            } else if (diffDays === 1) {
                relativeTime.textContent = 'Tomorrow';
            } else if (diffDays === -1) {
                relativeTime.textContent = 'Yesterday';
            } else if (diffDays > 0) {
                relativeTime.textContent = `In ${diffDays} day${diffDays > 1 ? 's' : ''}`;
            } else {
                relativeTime.textContent = `${Math.abs(diffDays)} day${Math.abs(diffDays) > 1 ? 's' : ''} ago`;
            }
        }

        // Update format results
        function updateFormatResults() {
            if (!currentDate) return;

            // ISO 8601
            iso8601Result.textContent = currentDate.toISOString();

            // US Format
            usFormatResult.textContent = currentDate.toLocaleDateString('en-US', {
                month: '2-digit',
                day: '2-digit',
                year: 'numeric'
            });

            // European Format
            euFormatResult.textContent = currentDate.toLocaleDateString('en-GB', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });

            // Long Format
            longFormatResult.textContent = currentDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Custom Format
            const customPattern = customFormat.value.trim();
            if (customPattern) {
                customResult.textContent = formatWithPattern(currentDate, customPattern);
            } else {
                customResult.textContent = 'Enter a custom format pattern...';
            }
        }

        // Format date with custom pattern
        function formatWithPattern(date, pattern) {
            const tokens = {
                'YYYY': date.getFullYear().toString(),
                'YY': date.getFullYear().toString().slice(-2),
                'MM': (date.getMonth() + 1).toString().padStart(2, '0'),
                'MMM': date.toLocaleDateString('en-US', { month: 'short' }),
                'MMMM': date.toLocaleDateString('en-US', { month: 'long' }),
                'DD': date.getDate().toString().padStart(2, '0'),
                'D': date.getDate().toString(),
                'dddd': date.toLocaleDateString('en-US', { weekday: 'long' }),
                'ddd': date.toLocaleDateString('en-US', { weekday: 'short' }),
                'HH': date.getHours().toString().padStart(2, '0'),
                'hh': (date.getHours() % 12 || 12).toString().padStart(2, '0'),
                'mm': date.getMinutes().toString().padStart(2, '0'),
                'ss': date.getSeconds().toString().padStart(2, '0'),
                'A': date.getHours() >= 12 ? 'PM' : 'AM'
            };

            let result = pattern;
            Object.keys(tokens).forEach(token => {
                result = result.replace(new RegExp(token, 'g'), tokens[token]);
            });

            return result;
        }

        // Update parsing status
        function updateParsingStatus(input, result) {
            const pattern = detectPattern(input);
            parsingStatus.className = 'result-card success p-3 rounded';
            parsingStatus.innerHTML = `
                <div class="text-sm font-medium text-[#10b981] mb-1">✅ Successfully Parsed</div>
                <div class="text-xs text-[#9ca3af]">Pattern: ${pattern}</div>
                <div class="text-xs text-[#9ca3af]">Result: ${result.toString()}</div>
            `;
        }

        // Detect input pattern
        function detectPattern(input) {
            if (/^\d{4}-\d{2}-\d{2}/.test(input)) return 'ISO 8601 format';
            if (/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(input)) return 'US date format (MM/DD/YYYY)';
            if (/^\d{1,2}\/\d{1,2}\/\d{2}$/.test(input)) return 'Short date format (MM/DD/YY)';
            if (/^(today|tomorrow|yesterday)$/i.test(input)) return 'Relative date keyword';
            if (input.includes('week') || input.includes('month')) return 'Relative date expression';
            return 'Natural language or custom format';
        }

        // Add format token
        function addToken(token) {
            const currentValue = customFormat.value;
            const separator = currentValue && !currentValue.endsWith(' ') && !currentValue.endsWith('-') && !currentValue.endsWith('/') ? ' ' : '';
            customFormat.value = currentValue + separator + token;
            parseAndFormat();
        }

        // Validate date
        function validateDate() {
            const input = dateInput.value.trim();
            if (!input) {
                alert('Please enter a date to validate');
                return;
            }

            try {
                const parsed = parseDate(input);
                if (parsed && !isNaN(parsed.getTime())) {
                    alert(`✅ Valid date!\n\nParsed as: ${parsed.toString()}\nISO: ${parsed.toISOString()}`);
                } else {
                    alert(`❌ Invalid date format!\n\nCould not parse: "${input}"`);
                }
            } catch (error) {
                alert(`❌ Parsing error!\n\n${error.message}`);
            }
        }

        // Copy to clipboard
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalBg = element.style.backgroundColor;
                element.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
                setTimeout(() => {
                    element.style.backgroundColor = originalBg;
                }, 1000);
            });
        }

        // Clear results
        function clearResults() {
            parsedInfo.textContent = 'No date parsed';
            timestampInfo.textContent = '-';
            relativeTime.textContent = '-';
            
            iso8601Result.textContent = 'Invalid date';
            usFormatResult.textContent = 'Invalid date';
            euFormatResult.textContent = 'Invalid date';
            longFormatResult.textContent = 'Invalid date';
            customResult.textContent = 'Invalid date';
            
            parsingStatus.className = 'result-card error p-3 rounded';
            parsingStatus.innerHTML = '<div class="text-sm text-[#ef4444]">❌ Invalid date format</div>';
        }

        // Make functions available globally
        window.addToken = addToken;
        window.copyToClipboard = copyToClipboard;

        // Initialize the application
        init();
    </script>
</body>
</html>
