<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Engineering Simulator</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Custom theme configuration */
        body {
            font-family: 'Roboto Mono', monospace;
        }
        
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a78bfa;
        }
        
        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #a78bfa, #c4b5fd);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #374151;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-1px);
        }
        
        /* Custom input styles */
        .custom-input {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            transition: all 0.3s ease;
        }
        
        .custom-input:focus {
            border-color: #8b5cf6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }
        
        .custom-input::placeholder {
            color: #9ca3af;
        }
        
        /* Custom select styles */
        .custom-select {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            transition: all 0.3s ease;
        }
        
        .custom-select:focus {
            border-color: #8b5cf6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }
        
        /* Custom textarea styles */
        .custom-textarea {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            resize: vertical;
            transition: all 0.3s ease;
        }
        
        .custom-textarea:focus {
            border-color: #8b5cf6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }
        
        .custom-textarea::placeholder {
            color: #9ca3af;
        }
        
        /* Custom checkbox styles */
        .custom-checkbox {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid #4b5563;
            border-radius: 3px;
            background: #374151;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .custom-checkbox:checked {
            background: #8b5cf6;
            border-color: #8b5cf6;
        }
        
        .custom-checkbox:checked::after {
            content: '✓';
            position: absolute;
            top: -2px;
            left: 1px;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .custom-checkbox:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }
        
        /* Output display styles */
        .output-container {
            background: #101827;
            border: 2px solid #374151;
            border-radius: 8px;
            padding: 16px;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-y: auto;
            max-height: 300px;
        }
        
        .prompt-display {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 6px;
            padding: 12px;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
            color: #d1d5db;
            max-height: 200px;
            overflow-y: auto;
        }
        
        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-generate {
            animation: pulseGenerate 0.3s ease-in-out;
        }
        
        @keyframes pulseGenerate {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Loading indicator */
        .loading-indicator {
            display: inline-flex;
            align-items: center;
            color: #8b5cf6;
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Component sections */
        .component-section {
            background: #101827;
            border: 1px solid #374151;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .component-label {
            font-size: 14px;
            font-weight: 600;
            color: #a78bfa;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .component-label i {
            margin-right: 8px;
            color: #8b5cf6;
        }
        
        /* Format constraints */
        .format-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 8px;
        }
        
        .format-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .format-item:hover {
            background: rgba(139, 92, 246, 0.1);
        }
        
        .format-item label {
            color: #f3f4f6;
            font-size: 13px;
            cursor: pointer;
            flex-grow: 1;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .format-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-[#101827] text-[#f3f4f6] flex flex-col min-h-screen">
    <!-- Header -->
    <header class="py-6 px-4 text-center border-b border-[#374151]">
        <h1 class="text-3xl md:text-4xl font-bold text-[#f3f4f6]">
            Prompt Engineering Simulator
        </h1>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col lg:flex-row gap-6 p-6">
        <!-- Left Panel: The Prompt Workshop (50% width) -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col space-y-6">
                <!-- Scenario Selector -->
                <div class="component-section">
                    <div class="component-label">
                        <i class="fas fa-play-circle"></i>
                        Select a Scenario
                    </div>
                    <select id="scenarioSelect" class="custom-select w-full px-4 py-3 rounded-lg font-medium">
                        <option value="technical-summary">Summarize a Technical Article</option>
                        <option value="marketing-email">Write a Marketing Email</option>
                        <option value="python-code">Generate Python Code</option>
                        <option value="creative-writing">Creative Writing Assistant</option>
                        <option value="data-analysis">Data Analysis Helper</option>
                    </select>
                </div>

                <!-- Persona Input -->
                <div class="component-section">
                    <div class="component-label">
                        <i class="fas fa-user-tie"></i>
                        Assign a Persona
                    </div>
                    <input 
                        type="text" 
                        id="personaInput" 
                        class="custom-input w-full px-4 py-3 rounded-lg font-medium"
                        placeholder='e.g., "an expert copywriter," "a skeptical scientist"'
                    >
                    <div class="text-xs text-[#9ca3af] mt-2">
                        Define the role or expertise the AI should embody when responding.
                    </div>
                </div>

                <!-- Task/Instruction -->
                <div class="component-section">
                    <div class="component-label">
                        <i class="fas fa-tasks"></i>
                        Define the Task
                    </div>
                    <textarea 
                        id="taskInput" 
                        class="custom-textarea w-full px-4 py-3 rounded-lg font-medium"
                        rows="3"
                        placeholder="Describe exactly what you want the AI to do..."
                    ></textarea>
                    <div class="text-xs text-[#9ca3af] mt-2">
                        Be specific and clear about the desired outcome.
                    </div>
                </div>

                <!-- Context/Examples -->
                <div class="component-section">
                    <div class="component-label">
                        <i class="fas fa-lightbulb"></i>
                        Provide Context or Examples (Few-Shot)
                    </div>
                    <textarea 
                        id="contextInput" 
                        class="custom-textarea w-full px-4 py-3 rounded-lg font-medium"
                        rows="4"
                        placeholder="Add background information, examples, or specific context..."
                    ></textarea>
                    <div class="text-xs text-[#9ca3af] mt-2">
                        Examples help guide the AI's understanding and output style.
                    </div>
                </div>

                <!-- Format & Constraints -->
                <div class="component-section">
                    <div class="component-label">
                        <i class="fas fa-cogs"></i>
                        Specify Output Format
                    </div>
                    <div class="format-grid">
                        <div class="format-item">
                            <input type="checkbox" id="formatJson" class="custom-checkbox">
                            <label for="formatJson">Output as JSON object</label>
                        </div>
                        <div class="format-item">
                            <input type="checkbox" id="formatFormal" class="custom-checkbox">
                            <label for="formatFormal">Use formal tone</label>
                        </div>
                        <div class="format-item">
                            <input type="checkbox" id="formatShort" class="custom-checkbox">
                            <label for="formatShort">Limit to 50 words</label>
                        </div>
                        <div class="format-item">
                            <input type="checkbox" id="formatSimple" class="custom-checkbox">
                            <label for="formatSimple">Explain like I'm 10</label>
                        </div>
                        <div class="format-item">
                            <input type="checkbox" id="formatBullets" class="custom-checkbox">
                            <label for="formatBullets">Use bullet points</label>
                        </div>
                        <div class="format-item">
                            <input type="checkbox" id="formatSteps" class="custom-checkbox">
                            <label for="formatSteps">Step-by-step format</label>
                        </div>
                    </div>
                </div>

                <!-- Control Bar -->
                <div class="space-y-3 mt-auto">
                    <button 
                        id="generateBtn" 
                        class="btn-primary w-full py-4 px-6 rounded-lg font-medium text-white flex items-center justify-center text-lg"
                    >
                        <i id="generateIcon" class="fas fa-magic mr-3"></i>
                        <span id="generateText">Generate Response</span>
                    </button>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button 
                            id="resetBtn" 
                            class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center"
                        >
                            <i class="fas fa-undo mr-2"></i>
                            Reset Scenario
                        </button>
                        
                        <button 
                            id="randomBtn" 
                            class="btn-secondary py-3 px-4 rounded-lg font-medium text-[#f3f4f6] flex items-center justify-center"
                        >
                            <i class="fas fa-dice mr-2"></i>
                            Randomize
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel: The Simulation Chamber (50% width) -->
        <div class="lg:w-1/2 bg-[#1f2937] rounded-xl p-6 border border-[#374151]">
            <div class="h-full flex flex-col space-y-6">
                <!-- Final Assembled Prompt -->
                <div class="flex-1">
                    <div class="component-label mb-4">
                        <i class="fas fa-code"></i>
                        Final Prompt Sent to LLM
                    </div>
                    <div id="assembledPrompt" class="prompt-display">
                        <!-- Real-time prompt preview will appear here -->
                        <span class="text-[#9ca3af]">Your assembled prompt will appear here as you make changes...</span>
                    </div>
                </div>

                <!-- Simulated LLM Output -->
                <div class="flex-1">
                    <div class="component-label mb-4">
                        <i class="fas fa-robot"></i>
                        Simulated AI Response
                    </div>
                    <div id="simulatedOutput" class="output-container">
                        <div class="text-center text-[#9ca3af] mt-8">
                            <i class="fas fa-arrow-left text-2xl mb-2"></i>
                            <p class="text-sm">Build your prompt using the controls on the left, then click "Generate Response" to see how the AI would respond</p>
                        </div>
                    </div>
                </div>

                <!-- Response Analysis -->
                <div class="bg-[#101827] border border-[#374151] rounded-lg p-4">
                    <div class="component-label mb-3">
                        <i class="fas fa-chart-line"></i>
                        Response Analysis
                    </div>
                    <div id="analysisContent" class="text-sm text-[#9ca3af]">
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>Prompt Length:</span>
                                <span id="promptLength" class="text-[#f3f4f6]">0 characters</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Components Used:</span>
                                <span id="componentsUsed" class="text-[#f3f4f6]">0/4</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Format Constraints:</span>
                                <span id="formatConstraints" class="text-[#f3f4f6]">0 applied</span>
                            </div>
                            <div class="mt-3 pt-3 border-t border-[#374151]">
                                <div class="text-xs">
                                    <span class="text-[#a78bfa] font-semibold">Tip:</span>
                                    <span id="promptTip">Add a persona to make your prompts more effective!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1f2937] border-t border-[#374151] py-6 mt-auto">
        <div class="flex justify-center space-x-6">
            <a href="https://www.linkedin.com/in/ashish-jangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-linkedin fa-2x"></i>
            </a>
            <a href="https://github.com/AshishJangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-github fa-2x"></i>
            </a>
            <a href="https://www.kaggle.com/ashishjangra27" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-kaggle fa-2x"></i>
            </a>
            <a href="https://huggingface.co/ashish-jangra" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.036 3L4.5 7.73v8.54l7.536 4.73 7.536-4.73V7.73L12.036 3zm5.157 3.74L12 10.5 6.807 6.74 12 4.73l5.193 2.01zm-5.157 12.72l-5.036-3.16V9.04L12 13.08l5.036-4.04v7.26L12.036 19.46z"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/ashish_zangra/" target="_blank" rel="noopener noreferrer" 
               class="text-[#9ca3af] hover:text-[#a78bfa] transition-colors duration-300">
                <i class="fab fa-instagram fa-2x"></i>
            </a>
        </div>
    </footer>

    <script>
        // Global variables
        let currentScenario = 'technical-summary';
        let isGenerating = false;
        
        // Scenario configurations
        const scenarios = {
            'technical-summary': {
                name: 'Technical Article Summary',
                persona: 'an expert technical writer',
                task: 'Summarize the key findings and implications of a technical research paper on artificial intelligence.',
                context: 'The paper discusses a new machine learning algorithm that improves image recognition accuracy by 15%. It was published in a peer-reviewed journal and tested on multiple datasets.',
                responses: {
                    default: 'This research presents a significant advancement in image recognition technology. The new machine learning algorithm demonstrates a 15% improvement in accuracy compared to existing methods, validated through rigorous testing across multiple datasets. The implications are substantial for computer vision applications, including medical imaging, autonomous vehicles, and security systems. The peer-reviewed publication ensures the reliability of these findings, making this a noteworthy contribution to the field of artificial intelligence.',
                    formal: 'The aforementioned research contribution represents a substantial enhancement to contemporary image recognition methodologies. The novel machine learning algorithm exhibits a quantifiable improvement of fifteen percent in classification accuracy relative to established baseline approaches. This enhancement has been rigorously validated through comprehensive evaluation across diverse datasets, thereby substantiating the robustness of the proposed methodology.',
                    simple: 'Scientists made a new computer program that\'s really good at looking at pictures and figuring out what\'s in them. It\'s 15% better than the old programs! This could help doctors look at X-rays, help cars drive themselves, and make security cameras work better.',
                    json: '{\n  "summary": "New AI algorithm improves image recognition by 15%",\n  "key_findings": [\n    "15% accuracy improvement over existing methods",\n    "Validated on multiple datasets",\n    "Peer-reviewed publication"\n  ],\n  "applications": ["medical imaging", "autonomous vehicles", "security systems"],\n  "significance": "high"\n}'
                }
            },
            'marketing-email': {
                name: 'Marketing Email',
                persona: 'an expert copywriter',
                task: 'Write a compelling marketing email to promote a new productivity software for small businesses.',
                context: 'The software is called "TaskFlow Pro" and helps teams organize projects, track time, and collaborate more effectively. It costs $29/month per user with a 14-day free trial.',
                responses: {
                    default: 'Subject: Transform Your Team\'s Productivity with TaskFlow Pro\n\nDear Business Owner,\n\nAre scattered tasks and missed deadlines costing your business money? TaskFlow Pro is here to change that.\n\nOur intuitive project management software helps small businesses like yours:\n• Organize projects with crystal clarity\n• Track time automatically and accurately\n• Collaborate seamlessly across teams\n\nJoin thousands of businesses already saving 10+ hours per week. Start your 14-day free trial today – no credit card required.\n\nReady to reclaim your time?\n\nBest regards,\nThe TaskFlow Team',
                    formal: 'Subject: Professional Project Management Solution for Your Organization\n\nDear Valued Business Professional,\n\nWe are pleased to introduce TaskFlow Pro, a comprehensive project management solution designed specifically for small and medium enterprises. Our platform provides robust functionality for project organization, time tracking, and team collaboration.\n\nTaskFlow Pro offers enterprise-grade features at $29 per user per month, with a complimentary 14-day evaluation period available.\n\nWe invite you to experience the benefits of streamlined project management.\n\nSincerely,\nTaskFlow Professional Services',
                    simple: 'Subject: Make Work Easier with TaskFlow Pro!\n\nHi there!\n\nWork getting messy? TaskFlow Pro makes it simple!\n\n✅ Keep all your projects organized\n✅ Know exactly how much time you spend on stuff\n✅ Work better with your team\n\nTry it FREE for 14 days!\n\nClick here to start →\n\nThanks!\nTaskFlow Team',
                    json: '{\n  "subject": "Transform Your Team\'s Productivity with TaskFlow Pro",\n  "greeting": "Dear Business Owner",\n  "pain_point": "scattered tasks and missed deadlines",\n  "solution": "TaskFlow Pro project management software",\n  "benefits": ["organize projects", "track time", "collaborate"],\n  "social_proof": "thousands of businesses saving 10+ hours per week",\n  "cta": "Start 14-day free trial",\n  "pricing": "$29/month per user"\n}'
                }
            },
            'python-code': {
                name: 'Python Code Generation',
                persona: 'an experienced Python developer',
                task: 'Write a Python function that calculates the factorial of a number using recursion.',
                context: 'The function should handle edge cases like negative numbers and include proper documentation with examples.',
                responses: {
                    default: 'def factorial(n):\n    """\n    Calculate the factorial of a number using recursion.\n    \n    Args:\n        n (int): A non-negative integer\n    \n    Returns:\n        int: The factorial of n\n    \n    Raises:\n        ValueError: If n is negative\n    \n    Examples:\n        >>> factorial(5)\n        120\n        >>> factorial(0)\n        1\n    """\n    if n < 0:\n        raise ValueError("Factorial is not defined for negative numbers")\n    \n    if n == 0 or n == 1:\n        return 1\n    \n    return n * factorial(n - 1)',
                    formal: 'def compute_factorial(n: int) -> int:\n    """\n    Compute the factorial of a non-negative integer using recursive methodology.\n    \n    Parameters:\n        n (int): The input integer for which factorial is to be computed\n    \n    Returns:\n        int: The factorial value of the input parameter\n    \n    Raises:\n        ValueError: When input parameter is negative\n    """\n    if not isinstance(n, int):\n        raise TypeError("Input must be an integer")\n        \n    if n < 0:\n        raise ValueError("Factorial undefined for negative integers")\n    \n    return 1 if n <= 1 else n * compute_factorial(n - 1)',
                    simple: 'def factorial(n):\n    """Find n! (n factorial) using recursion."""\n    \n    # Can\'t do factorial of negative numbers\n    if n < 0:\n        return "Error: No negatives allowed!"\n    \n    # Base case: 0! = 1 and 1! = 1\n    if n <= 1:\n        return 1\n    \n    # Recursive case: n! = n × (n-1)!\n    return n * factorial(n - 1)',
                    json: '{\n  "function_name": "factorial",\n  "parameters": ["n: int"],\n  "return_type": "int",\n  "algorithm": "recursion",\n  "edge_cases": ["negative numbers", "zero", "one"],\n  "time_complexity": "O(n)",\n  "space_complexity": "O(n)",\n  "code": "def factorial(n):\\n    if n < 0:\\n        raise ValueError(\\"Negative input\\")\\n    return 1 if n <= 1 else n * factorial(n - 1)"\n}'
                }
            },
            'creative-writing': {
                name: 'Creative Writing Assistant',
                persona: 'a creative writing coach',
                task: 'Help brainstorm ideas for a science fiction short story about time travel.',
                context: 'The story should be suitable for young adults and explore themes of consequence and responsibility.',
                responses: {
                    default: 'Here are some compelling time travel concepts for your YA sci-fi story:\n\n**Core Premise Ideas:**\n• A teenager discovers their smartphone can send messages to their past self\n• Students find a time loop in their school library that resets every hour\n• A young scientist accidentally creates a time rift while working on a school project\n\n**Conflict & Consequence Themes:**\n• Each time change creates unexpected ripple effects\n• The protagonist must choose between personal gain and protecting others\n• Time travel comes with a personal cost (aging, memory loss, etc.)\n\n**Character Arc Suggestions:**\n• Start with selfish motivations (fixing grades, relationships)\n• Learn that every action affects others\n• End with mature understanding of responsibility\n\nRemember: Focus on emotional stakes over technical explanations. What matters most is how time travel changes your character internally.',
                    formal: 'I shall provide structured narrative concepts for your young adult science fiction composition:\n\n**Conceptual Framework:**\nThe temporal displacement narrative should examine causality and moral responsibility through age-appropriate scenarios.\n\n**Suggested Plot Mechanisms:**\n1. Technological discovery enabling temporal communication\n2. Localized temporal anomaly with cyclical properties\n3. Accidental temporal breach through scientific experimentation\n\n**Thematic Development:**\nThe narrative arc should progress from self-interest to altruistic responsibility, demonstrating the interconnectedness of actions and consequences.\n\n**Literary Considerations:**\nEmphasize emotional resonance over technical exposition, ensuring accessibility for the target demographic.',
                    simple: 'Cool time travel story ideas for teens:\n\n**Fun Setups:**\n• Magic phone that texts your yesterday-self\n• School has a time bubble that keeps repeating the same hour\n• Science fair project goes wrong and makes a time door\n\n**What Goes Wrong:**\n• Fix one thing, break something else\n• Help yourself but hurt your friends\n• Time travel makes you tired or forgetful\n\n**How They Grow:**\n• Start wanting to cheat on tests or fix embarrassing moments\n• Learn that changing things affects everyone\n• End up being a hero who thinks about others first\n\n**Writing Tip:** Make readers care more about feelings than how the time machine works!',
                    json: '{\n  "story_concepts": [\n    {\n      "premise": "smartphone time messaging",\n      "target_age": "14-18",\n      "themes": ["consequence", "responsibility"],\n      "conflict": "ripple effects",\n      "character_growth": "selfish to selfless"\n    }\n  ],\n  "plot_elements": {\n    "inciting_incident": "accidental discovery",\n    "rising_action": "experimenting with power",\n    "climax": "major consequence threatens others",\n    "resolution": "sacrifice for greater good"\n  },\n  "writing_advice": "prioritize emotional stakes over technical details"\n}'
                }
            },
            'data-analysis': {
                name: 'Data Analysis Helper',
                persona: 'a data scientist',
                task: 'Analyze customer churn data and provide actionable insights for reducing customer attrition.',
                context: 'The dataset contains 5,000 customers with features like subscription length, support tickets, usage frequency, and billing history. Current churn rate is 15%.',
                responses: {
                    default: '**Customer Churn Analysis Summary**\n\n**Key Findings:**\n• High-risk indicators: >3 support tickets/month, <2 logins/week, payment delays\n• Churn peaks at 6-month mark (onboarding completion)\n• Premium customers have 40% lower churn rate\n\n**Recommended Actions:**\n1. **Proactive Support**: Flag accounts with 2+ tickets and assign dedicated support\n2. **Engagement Campaigns**: Target low-usage customers with personalized tutorials\n3. **Retention Offers**: Provide upgrade incentives at 5-month mark\n4. **Payment Flexibility**: Offer alternative billing cycles for late payers\n\n**Expected Impact:**\n• Reduce churn from 15% to 10-12%\n• Increase customer lifetime value by 25%\n• ROI on retention efforts: 3:1\n\n**Next Steps:**\nImplement A/B testing for retention campaigns and establish monthly churn monitoring dashboard.',
                    formal: '**Executive Summary: Customer Retention Analysis**\n\n**Methodology:**\nComprehensive statistical analysis of 5,000 customer records utilizing predictive modeling and cohort analysis.\n\n**Critical Risk Factors Identified:**\n• Support ticket frequency exceeding 3 incidents monthly\n• User engagement metrics below 2 sessions weekly\n• Payment compliance irregularities\n\n**Strategic Recommendations:**\n1. Deploy predictive intervention protocols for at-risk segments\n2. Implement data-driven customer success initiatives\n3. Establish systematic retention value optimization\n\n**Projected Business Impact:**\n• Churn reduction: 25-33%\n• Customer lifetime value enhancement: $150-200 per customer\n• Return on investment: 300%\n\n**Implementation Timeline:**\nPhased rollout over 90 days with continuous performance monitoring.',
                    simple: '**What We Found:**\n\nYour customers leave when:\n• They call support too much (more than 3 times a month)\n• They barely use your product (less than 2 times a week)\n• They\'re late paying bills\n• They\'ve been customers for about 6 months\n\n**How to Fix It:**\n\n1. **Help Before They Ask**: When someone calls support twice, have your best person call them\n2. **Teach Them**: Send helpful videos to people who don\'t use your product much\n3. **Give Them Deals**: Offer upgrades to people at 5 months\n4. **Make Paying Easier**: Let people pay monthly instead of yearly\n\n**What This Will Do:**\n• Keep more customers (from 15% leaving to maybe 10%)\n• Make more money from each customer\n• Make customers happier',
                    json: '{\n  "analysis_type": "customer_churn_prediction",\n  "dataset_size": 5000,\n  "current_churn_rate": 0.15,\n  "risk_factors": [\n    {"factor": "support_tickets", "threshold": ">3/month", "weight": 0.8},\n    {"factor": "login_frequency", "threshold": "<2/week", "weight": 0.7},\n    {"factor": "payment_delays", "threshold": ">7 days", "weight": 0.6}\n  ],\n  "recommendations": [\n    {"action": "proactive_support", "target": "high_ticket_users", "expected_impact": 0.03},\n    {"action": "engagement_campaign", "target": "low_usage", "expected_impact": 0.02}\n  ],\n  "projected_outcomes": {\n    "churn_reduction": "15% to 10-12%",\n    "ltv_increase": "25%",\n    "roi": "3:1"\n  }\n}'
                }
            }
        };
        
        // DOM elements
        const scenarioSelect = document.getElementById('scenarioSelect');
        const personaInput = document.getElementById('personaInput');
        const taskInput = document.getElementById('taskInput');
        const contextInput = document.getElementById('contextInput');
        const generateBtn = document.getElementById('generateBtn');
        const generateIcon = document.getElementById('generateIcon');
        const generateText = document.getElementById('generateText');
        const resetBtn = document.getElementById('resetBtn');
        const randomBtn = document.getElementById('randomBtn');
        const assembledPrompt = document.getElementById('assembledPrompt');
        const simulatedOutput = document.getElementById('simulatedOutput');
        const promptLength = document.getElementById('promptLength');
        const componentsUsed = document.getElementById('componentsUsed');
        const formatConstraints = document.getElementById('formatConstraints');
        const promptTip = document.getElementById('promptTip');
        
        // Format checkboxes
        const formatCheckboxes = {
            json: document.getElementById('formatJson'),
            formal: document.getElementById('formatFormal'),
            short: document.getElementById('formatShort'),
            simple: document.getElementById('formatSimple'),
            bullets: document.getElementById('formatBullets'),
            steps: document.getElementById('formatSteps')
        };
        
        // Initialize the application
        function init() {
            setupEventListeners();
            loadScenario(currentScenario);
            updatePromptDisplay();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            scenarioSelect.addEventListener('change', handleScenarioChange);
            personaInput.addEventListener('input', updatePromptDisplay);
            taskInput.addEventListener('input', updatePromptDisplay);
            contextInput.addEventListener('input', updatePromptDisplay);
            generateBtn.addEventListener('click', generateResponse);
            resetBtn.addEventListener('click', resetToScenario);
            randomBtn.addEventListener('click', randomizeInputs);
            
            // Format checkbox listeners
            Object.values(formatCheckboxes).forEach(checkbox => {
                checkbox.addEventListener('change', updatePromptDisplay);
            });
        }
        
        // Handle scenario selection change
        function handleScenarioChange() {
            currentScenario = scenarioSelect.value;
            loadScenario(currentScenario);
            updatePromptDisplay();
        }
        
        // Load scenario data
        function loadScenario(scenarioKey) {
            const scenario = scenarios[scenarioKey];
            
            personaInput.value = scenario.persona;
            taskInput.value = scenario.task;
            contextInput.value = scenario.context;
            
            // Clear format checkboxes
            Object.values(formatCheckboxes).forEach(checkbox => {
                checkbox.checked = false;
            });
        }
        
        // Update the assembled prompt display
        function updatePromptDisplay() {
            const prompt = assemblePrompt();
            
            if (prompt.trim()) {
                assembledPrompt.textContent = prompt;
                assembledPrompt.style.color = '#f3f4f6';
            } else {
                assembledPrompt.innerHTML = '<span class="text-[#9ca3af]">Your assembled prompt will appear here as you make changes...</span>';
            }
            
            updateAnalytics();
        }
        
        // Assemble the complete prompt
        function assemblePrompt() {
            let prompt = '';
            
            // Add persona
            if (personaInput.value.trim()) {
                prompt += `You are ${personaInput.value.trim()}.\n\n`;
            }
            
            // Add task
            if (taskInput.value.trim()) {
                prompt += `${taskInput.value.trim()}\n\n`;
            }
            
            // Add context
            if (contextInput.value.trim()) {
                prompt += `Context:\n${contextInput.value.trim()}\n\n`;
            }
            
            // Add format constraints
            const constraints = getActiveConstraints();
            if (constraints.length > 0) {
                prompt += `Please ensure your response:\n${constraints.join('\n')}\n\n`;
            }
            
            return prompt.trim();
        }
        
        // Get active format constraints
        function getActiveConstraints() {
            const constraints = [];
            
            if (formatCheckboxes.json.checked) {
                constraints.push('- Is formatted as a valid JSON object');
            }
            if (formatCheckboxes.formal.checked) {
                constraints.push('- Uses a formal, professional tone');
            }
            if (formatCheckboxes.short.checked) {
                constraints.push('- Is limited to 50 words or less');
            }
            if (formatCheckboxes.simple.checked) {
                constraints.push('- Is explained in simple terms (like explaining to a 10-year-old)');
            }
            if (formatCheckboxes.bullets.checked) {
                constraints.push('- Uses bullet points for key information');
            }
            if (formatCheckboxes.steps.checked) {
                constraints.push('- Is organized in a step-by-step format');
            }
            
            return constraints;
        }
        
        // Update analytics display
        function updateAnalytics() {
            const prompt = assemblePrompt();
            
            // Prompt length
            promptLength.textContent = `${prompt.length} characters`;
            
            // Components used
            let componentsCount = 0;
            if (personaInput.value.trim()) componentsCount++;
            if (taskInput.value.trim()) componentsCount++;
            if (contextInput.value.trim()) componentsCount++;
            const activeConstraints = getActiveConstraints().length;
            if (activeConstraints > 0) componentsCount++;
            
            componentsUsed.textContent = `${componentsCount}/4`;
            
            // Format constraints
            formatConstraints.textContent = `${activeConstraints} applied`;
            
            // Dynamic tip
            updatePromptTip(componentsCount, activeConstraints, prompt.length);
        }
        
        // Update prompt tip based on current state
        function updatePromptTip(components, constraints, length) {
            let tip = '';
            
            if (components === 0) {
                tip = 'Start by selecting a scenario and adding a persona!';
            } else if (!personaInput.value.trim()) {
                tip = 'Add a persona to make your prompts more effective!';
            } else if (!contextInput.value.trim()) {
                tip = 'Add context or examples for better AI understanding!';
            } else if (constraints === 0) {
                tip = 'Try adding format constraints to structure the output!';
            } else if (length < 100) {
                tip = 'More detailed prompts often yield better results!';
            } else if (components === 4) {
                tip = 'Excellent! Your prompt uses all key components!';
            } else {
                tip = 'Great start! Consider adding more specific details.';
            }
            
            promptTip.textContent = tip;
        }
        
        // Generate response based on current prompt
        async function generateResponse() {
            if (isGenerating) return;
            
            const prompt = assemblePrompt();
            if (!prompt.trim()) {
                alert('Please build a prompt first!');
                return;
            }
            
            isGenerating = true;
            generateBtn.disabled = true;
            generateIcon.className = 'fas fa-spinner fa-spin mr-3';
            generateText.textContent = 'Generating...';
            generateBtn.classList.add('pulse-generate');
            
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // Get appropriate response
            const response = getSimulatedResponse();
            
            // Display response with animation
            simulatedOutput.innerHTML = '';
            simulatedOutput.classList.add('fade-in');
            
            // Typewriter effect
            await typewriterEffect(simulatedOutput, response);
            
            // Reset button state
            isGenerating = false;
            generateBtn.disabled = false;
            generateIcon.className = 'fas fa-magic mr-3';
            generateText.textContent = 'Generate Response';
            generateBtn.classList.remove('pulse-generate');
        }
        
        // Get simulated response based on prompt configuration
        function getSimulatedResponse() {
            const scenario = scenarios[currentScenario];
            const constraints = getActiveConstraints();
            
            // Determine response type based on constraints
            if (formatCheckboxes.json.checked && scenario.responses.json) {
                return scenario.responses.json;
            } else if (formatCheckboxes.formal.checked && scenario.responses.formal) {
                return scenario.responses.formal;
            } else if (formatCheckboxes.simple.checked && scenario.responses.simple) {
                return scenario.responses.simple;
            } else {
                return scenario.responses.default;
            }
        }
        
        // Typewriter effect for response display
        async function typewriterEffect(element, text) {
            element.textContent = '';
            const words = text.split(' ');
            
            for (let i = 0; i < words.length; i++) {
                element.textContent += (i > 0 ? ' ' : '') + words[i];
                
                // Add slight delay for realistic typing effect
                if (i % 3 === 0) {
                    await new Promise(resolve => setTimeout(resolve, 50));
                }
            }
        }
        
        // Reset to current scenario defaults
        function resetToScenario() {
            loadScenario(currentScenario);
            updatePromptDisplay();
            
            // Clear output
            simulatedOutput.innerHTML = `
                <div class="text-center text-[#9ca3af] mt-8">
                    <i class="fas fa-arrow-left text-2xl mb-2"></i>
                    <p class="text-sm">Build your prompt using the controls on the left, then click "Generate Response" to see how the AI would respond</p>
                </div>
            `;
        }
        
        // Randomize inputs for experimentation
        function randomizeInputs() {
            const personas = [
                'an expert copywriter',
                'a skeptical scientist',
                'a creative writing coach',
                'a data scientist',
                'a technical writer',
                'a marketing strategist',
                'a software developer',
                'a business consultant'
            ];
            
            // Randomize persona
            const randomPersona = personas[Math.floor(Math.random() * personas.length)];
            personaInput.value = randomPersona;
            
            // Randomize some format constraints
            Object.values(formatCheckboxes).forEach(checkbox => {
                checkbox.checked = Math.random() > 0.7; // 30% chance for each
            });
            
            updatePromptDisplay();
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
        
        // Handle page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                updatePromptDisplay();
            }
        });
    </script>
</body>
</html>
